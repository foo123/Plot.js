/**
*   Plot.js
*   Simple shape sketching and chart / functional graph plotting library which can render to Canvas, SVG and plain HTML
*   https://github.com/foo123/Plot.js
**/
!function(t,e){"use strict";e in t||(t[e]=function(){"use strict";var F=Math,e="prototype",t=1e-6,l=Object[e].hasOwnProperty,r=Object[e].toString;if(!F.hypot){F.hypot=function(t,e){var r=0,n=0,i,o;for(i=0;i<arguments.length;i+=1){o=F.abs(Number(arguments[i]));if(o>r){n*=r/o*(r/o);r=o}n+=o===0&&r===0?0:o/r*(o/r)}return r===1/0?1/0:r*F.sqrt(n)}}function n(t){return function(){throw new Error(t||"Error")}}function B(t){return"[object Array]"===r.call(t)}function d(t){return"[object Object]"===r.call(t)}function h(t){return"function"===typeof t}function a(t){return!isNaN(t)&&isFinite(t)}function O(t){var e={},r;for(r in t){if(!l.call(t,r))continue;if(d(t[r]))e[r]=O(t[r]);else e[r]=t[r]}return e}function X(){var t=arguments,e=t.length,r=e?true===t[0]:false,n=r?1:0,i=(e>n?t[n]:{})||{},o,s,a;for(s=n+1;s<e;s++){o=t[s];for(a in o){if(!l.call(o,a))continue;if(r&&d(i[a])&&d(o[a]))i[a]=X(true,i[a],o[a]);else i[a]=o[a]}}return i}function i(r,n){var i=null;return function(){var t=this,e=arguments;clearTimeout(i),i=setTimeout(function(){r.apply(t,e)},n)}}function v(t){if(t){if(255>t[2])return[t[0],t[1],t[2]+1];else if(255>t[1])return[t[0],t[1]+1,0];else if(255>t[0])return[t[0]+1,0,0]}return[0,0,0]}function o(t){return[(t=parseInt("#"===t.charAt(0)?t.slice(1):t,16))>>16&255,t>>8&255,255&t]}function L(t){var e=[Number(t[0]).toString(16),Number(t[1]).toString(16),Number(t[2]).toString(16)];if(1===e[0].length)e[0]="0"+e[0];if(1===e[1].length)e[1]="0"+e[1];if(1===e[2].length)e[2]="0"+e[2];return e[0]+e[1]+e[2]}function c(t){var e,r,n,i=F.round(t[0]),o=F.round(t[1]*255/100),s=F.round(t[2]*255/100);if(o===0){e=r=n=s}else{var a=s,l=(255-o)*s/255,d=(a-l)*(i%60)/60;if(i==360)i=0;if(i<60){e=a;n=l;r=l+d}else if(i<120){r=a;n=l;e=a-d}else if(i<180){r=a;e=l;n=l+d}else if(i<240){n=a;e=l;r=a-d}else if(i<300){n=a;r=l;e=l+d}else if(i<360){e=a;r=l;n=a-d}else{e=0;r=0;n=0}}return[F.round(e),F.round(r),F.round(n)]}function s(t){var e=0,r=0,n=0,i=t[0],o=t[1],s=t[2],a=F.min(i,o,s),l=F.max(i,o,s),d=l-a;if(0!=(n=l));if(0!=(r=0!=l?255*d/l:0))e=i===l?(o-s)/d:o===l?2+(s-i)/d:4+(i-o)/d;else e=-1;if((e*=60)<0)e+=360;return r=100*r/255,n=100*n/255,[F.round(e),F.round(r),F.round(n)]}function M(t,e){e=String(e||"hex").toLowerCase();var r=new Array(t),n=F.min(t,60),i,o,s;for(i=0,o=0;i<t;i++){s=c([o*360/n,100,100]);r[i]="rgb"===e?"rgb("+s.join(",")+")":"#"+L(s);o+=2;if(o>=n)o=o&1?0:1}return r}function y(t){var e,r=new Array(t);for(e=0;e<t;e++)r[e]="Entry: "+String(e+1);return r}function Y(t){return t}function u(t){return F.log10(t)}function p(t){return t.x}function x(t){return t.y}function W(t,e,r){r=r||0;return 0>r?t:1<r?e:t+r*(e-t)}function g(e,r){if("number"==typeof r)r={x:r,y:r};return{x:function(t){return e.x+r.x*F.cos(t)},y:function(t){return e.y+r.y*F.sin(t)}}}function f(o){return 4<=o.length?function(t){var e=t,r=1-t,n=e*e,i=r*r;return r*i*o[0]+3*i*e*o[1]+3*r*n*o[2]+n*e*o[3]}:3===o.length?function(t){var e=t,r=1-t,n=e*e,i=r*r;return i*o[0]+2*r*e*o[1]+n*o[2]}:2===o.length?function(t){return(1-t)*o[0]+t*o[1]}:function(t){return o[0]||0}}function w(t){var e,r,n,i,o,s,a,l,d=t.length-1;r=new Array(d);n=new Array(d);i=new Array(d);o=new Array(d);s=new Array(d);a=new Array(d);i[0]=0;o[0]=2;s[0]=1;a[0]=t[0]+2*t[1];for(e=1;e<d-1;e++){i[e]=1;o[e]=4;s[e]=1;a[e]=4*t[e]+2*t[e+1]}i[d-1]=2;o[d-1]=7;s[d-1]=0;a[d-1]=8*t[d-1]+t[d];for(e=1;e<d;e++){l=i[e]/o[e-1];o[e]=o[e]-l*s[e-1];a[e]=a[e]-l*a[e-1]}r[d-1]=a[d-1]/o[d-1];for(e=d-2;e>=0;--e)r[e]=(a[e]-s[e]*r[e+1])/o[e];for(e=0;e<d-1;e++)n[e]=2*t[e+1]-r[e+1];n[d-1]=(t[d]+r[d-1])/2;return[r,n]}function b(t){var e,r,n;if(2>=t.length){n=[t]}else{n=[];r=w(t);for(e=0;e<t.length-1;e++)n.push([t[e],r[0][e],r[1][e],t[e+1]])}return n}function m(t){return F.hypot(t[0],t[1])}function P(t,e){return(t[0]*e[0]+t[1]*e[1])/(m(t)*m(e))}function I(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*F.acos(P(t,e))}function S(t,e,r,n,i,o){r=r*Math.PI/180;var s=F.sin(r),a=F.cos(r),l=(a*(t.x-o.x)+s*(t.y-o.y))/2,d=(-s*(t.x-o.x)+a*(t.y-o.y))/2,h=e.x,c=e.y,y,u,p,x,g,f,w,b,m,v,L,S,C,k,z,T,A,E,D;b=F.pow(l,2);m=F.pow(d,2);f=F.pow(h,2);w=F.pow(c,2);y=b/f+m/w;if(y>1){u=F.sqrt(y);h*=u;c*=u}f=F.pow(h,2);w=F.pow(c,2);p=(n==i?-1:1)*F.sqrt((f*w-f*m-w*b)/(f*m+w*b));if(isNaN(p))p=0;x=p*h*d/c;g=p*-c*l/h;v=(t.x+o.x)/2+a*x-s*g;L=(t.y+o.y)/2+s*x+a*g;S=I([1,0],[(l-x)/h,(d-g)/c]);C=[(l-x)/h,(d-g)/c];k=[(-l-x)/h,(-d-g)/c];z=I(C,k);D=P(C,k);if(D<=-1)z=F.PI;if(D>=1)z=0;T=h>c?h:c;A=h>c?1:h/c;E=h>c?c/h:1;return[v,L,r,A,E,T,S,z,i]}function C(t,e,r,n,i,o,s){var a=this,l=(e+r)/2,d=o||new H(t.x(e),t.y(e)),h=s||new H(t.x(r),t.y(r)),c=new H(t.x(l),t.y(l));if(0>=i||c.dist(d,h)<=n){return d.eq(c)||h.eq(c)?[d,h]:[d,c,h]}else{return C(t,e,l,n,i-1,d,c).concat(C(t,l,r,n,i-1,c,h).slice(1))}}function k(t,e){e=e||window.event;var r=t.getBoundingClientRect(),n=0,i=0,o,s,a,l,d,h;if(e.changedTouches&&e.changedTouches.length){o=e.changedTouches[0].clientX;s=e.changedTouches[0].clientY;a=e.changedTouches[0].pageX;l=e.changedTouches[0].pageY}else{o=e.clientX;s=e.clientY;a=e.pageX;l=e.pageY}d=o-n-r.left;h=s-i-r.top;return{top:h,left:d,clientX:o,clientY:s,pageX:a,pageY:l}}function H(t,e){var r=this;if(!(r instanceof H))return new H(t,e);if(t instanceof H){r.x=t.x;r.y=t.y}else if(null!=t&&null!=e){r.x=t;r.y=e}else{r.x=0;r.y=0}}function q(t){var e=this;if(!(e instanceof q))return new q(t);if(t instanceof q){e.v=t.v.slice()}else if(t&&9===t.length){e.v=t}else{e.v=[1,0,0,0,1,0,0,0,1]}}function z(t,e){}function T(t,e){var r=this;if(!(r instanceof T))return new T(t,e);r.renderer=t instanceof T.Renderer?t:new T.Renderer.Html(t||document.body);r.tooltip=document.createElement("div");r.tooltip.className="--plot-tooltip --plot-hide-tooltip";r.tooltip.style.position="absolute";document.body.appendChild(r.tooltip);r.opts=X(true,r.defaultOpts(),e||{})}return H[e]={constructor:H,x:0,y:0,dispose:function(){return this.x=null,this.y=null,this},eq:function(t,e){return 2<=arguments.length?F.hypot(this.x-t.x,this.y-t.y)<=(e||0):this.x===t.x&&this.y===t.y},dist:function(t,e){var r=e.x-t.x,n=e.y-t.y;return F.abs(n*this.x-r*this.y+e.x*t.y-e.y*t.x)/F.hypot(n,r)},apply:function(t,e){return null==e&&(e=t),t instanceof q?t.transform(this):h(t)&&h(e)?new H(t(this.x),e(this.y)):this}},H.isFinite=function(t){return a(t.x)&&a(t.y)},q[e]={constructor:q,v:null,dispose:function(){return this.v=null,this},eq:function(t){var e,r=this.v,n=t.v;for(e=0;e<9;e++)if(r[e]!==n[e])return!1;return!0},mul:function(t){var e,r,n,i=this.v;return t instanceof H||l.call(t,"x")&&l.call(t,"y")?(r=t.x,n=t.y,new H(i[0]*r+i[1]*n+i[2],i[3]*r+i[4]*n+i[5])):t instanceof q?(e=t.v,new q([i[0]*e[0]+i[1]*e[3]+i[2]*e[6],i[0]*e[1]+i[1]*e[4]+i[2]*e[7],i[0]*e[2]+i[1]*e[5]+i[2]*e[8],i[3]*e[0]+i[4]*e[3]+i[5]*e[6],i[3]*e[1]+i[4]*e[4]+i[5]*e[7],i[3]*e[2]+i[4]*e[5]+i[5]*e[8],i[6]*e[0]+i[7]*e[3]+i[8]*e[6],i[6]*e[1]+i[7]*e[4]+i[8]*e[7],i[6]*e[2]+i[7]*e[5]+i[8]*e[8]])):this},skew:function(t,e){return new q([1,t||0,0,e||0,1,0,0,0,1]).mul(this)},scale:function(t,e){return 1===arguments.length&&(e=t),new q([t,0,0,0,e,0,0,0,1]).mul(this)},rotate:function(t){t=t||0;var e=F.sin(t),r=F.cos(t);return new q([r,-e,0,e,r,0,0,0,1]).mul(this)},translate:function(t,e){return new q([1,0,t||0,0,1,e||0,0,0,1]).mul(this)},transform:function(t){return this.mul(t)}},z[e]={constructor:z,container:null,drawLayer:null,hitDict:null,nextColor:null,handler:null,hitTarget:null,opts:null,dispose:function(){var t=this;return t.container&&t.drawLayer&&(t.handler&&(t.drawLayer.removeEventListener("touchstart",t.handler,!1),t.drawLayer.removeEventListener("mouseenter",t.handler,!1),t.drawLayer.removeEventListener("click",t.handler,!1)),t.container.removeChild(t.drawLayer)),t.container=null,t.drawLayer=null,t.nextColor=null,t.hitDict=null,t.hitTarget=null,t.handler=null,t.opts=null,t},defaultOpts:function(){return{background:{color:"#ffffff"},text:{size:12,color:"#000000"},point:{size:4,color:"#000000"},line:{size:1,color:"#000000",style:"solid"},shape:{border:{size:1,color:"#000000",style:"solid"},fill:"none"}}},width:function(){return this.drawLayer?this.drawLayer.clientWidth:0},height:function(){return this.drawLayer?this.drawLayer.clientHeight:0},resize:function(){return this},init:n("Method not implemented!"),objAt:n("Method not implemented!"),clear:n("Method not implemented!"),background:n("Method not implemented!"),drawPoint:n("Method not implemented!"),drawLine:n("Method not implemented!"),drawRect:n("Method not implemented!"),drawEllipse:n("Method not implemented!"),drawArc:n("Method not implemented!"),drawBezier:n("Method not implemented!"),drawText:n("Method not implemented!")},z.handler=function(t){var e,r,o=this,n=o.drawLayer===t.target;function i(t,e,r,n){var i;t&&e&&e.extra&&e.extra.listener&&h(e.extra.listener[t])&&(i={x:r.left,y:o.height()-r.top,left:r.left,top:r.top,clientX:r.clientX,clientY:r.clientY,pageX:r.pageX,pageY:r.pageY},e.extra.listener[t](t,e,i,n))}if(n&&("touchstart"===t.type?(o.drawLayer.addEventListener("touchmove",o.handler,!1),o.drawLayer.addEventListener("touchend",o.handler,!1),o.drawLayer.addEventListener("touchcancel",o.handler,!1)):"touchend"===t.type||"touchcancel"===t.type?(o.drawLayer.removeEventListener("touchmove",o.handler,!1),o.drawLayer.removeEventListener("touchend",o.handler,!1),o.drawLayer.removeEventListener("touchcancel",o.handler,!1),o.hitTarget&&(i("leave",o.hitTarget.obj,o.hitTarget.pos,t),o.hitTarget=null)):"mouseenter"===t.type?(o.drawLayer.addEventListener("mouseleave",o.handler,!1),o.drawLayer.addEventListener("mousemove",o.handler,!1)):"mouseleave"===t.type&&(o.drawLayer.removeEventListener("mouseleave",o.handler,!1),o.drawLayer.removeEventListener("mousemove",o.handler,!1),o.hitTarget&&(i("leave",o.hitTarget.obj,o.hitTarget.pos,t),o.hitTarget=null))),"touchmove"===t.type||"mousemove"===t.type){if(e=k(o.drawLayer,t),r=o.objAt(t,e),n&&!r)return;r?(o.hitTarget&&(o.hitTarget.obj!==r?(i("leave",o.hitTarget.obj,e,t),o.hitTarget=null):i("move",o.hitTarget.obj,e,t)),o.hitTarget||(o.hitTarget={obj:r,pos:e},i("enter",o.hitTarget.obj,e,t))):o.hitTarget&&(i("leave",o.hitTarget.obj,e,t),o.hitTarget=null)}else"click"===t.type&&(e=k(o.drawLayer,t),i("click",r=o.objAt(t,e),e,t))},(z.Html=function t(e,r){if(!(this instanceof t))return new t(e,r);this.container=e,this.opts=X(!0,this.defaultOpts(),r||{})})[e]=X(new z,{constructor:z.Html,init:function(){var t=this;return t.drawLayer||(t.nextColor=[0,0,0],t.hitDict={},t.hitTarget=null,t.drawLayer=document.createElement("div"),t.drawLayer.className="--plot-html",t.drawLayer.style.position="absolute",t.drawLayer.style.left="0px",t.drawLayer.style.top="0px",t.drawLayer.style.width="100%",t.drawLayer.style.height="100%",t.drawLayer.style.display="block",t.drawLayer.style.overflow="hidden",t.drawLayer.style.margin="0px",t.drawLayer.style.padding="0px",t.drawLayer.style.border="none",t.drawLayer.style.backgroundColor=t.opts.background.color,t.container.appendChild(t.drawLayer),t.handler=z.handler.bind(t),t.drawLayer.addEventListener("touchstart",t.handler,!1),t.drawLayer.addEventListener("mouseenter",t.handler,!1),t.drawLayer.addEventListener("click",t.handler,!1)),t},objAt:function(t,e){var r=t.target?t.target.hitId:null;return r&&l.call(this.hitDict,r)?this.hitDict[r]:null},clear:function(){var t=this;return t.drawLayer.innerHTML="",t.nextColor=[0,0,0],t.hitDict={},t.hitTarget=null,t},background:function(t){return this.opts.background.color=t,this.drawLayer.style.backgroundColor=this.opts.background.color,this},drawPoint:function(t,e,r,n){var i=this,o=document.createElement("div");return e=null!=e?e:i.opts.point.size,r=String(r||i.opts.point.color).toLowerCase(),o.className="--plot-point",o.style.position="absolute",o.style.display="inline-block",o.style.overflow="hidden",o.style.boxSizing="border-box",o.style.margin="0px",o.style.padding="0px",o.style.width=String(2*e)+"px",o.style.height=String(2*e)+"px",o.style.border="1px solid "+r,o.style.borderRadius="50%",o.style.backgroundColor=r,o.style.left=String(t.x)+"px",o.style.bottom=String(t.y)+"px",o.style.transformOrigin="left bottom",o.style.transform="translate(-50%,50%)",o.hitId=L(i.nextColor=v(i.nextColor)),i.hitDict[o.hitId]={type:"point",pos:t,extra:n||null},i.drawLayer.appendChild(o),i},drawLine:function(t,e,r,n,i,o,s){var a=this,l=document.createElement("div"),d=e.y-t.y,h=e.x-t.x,c=F.hypot(d,h);return r=null!=r?r:a.opts.line.size,n=String(n||a.opts.line.color).toLowerCase(),"dashed"!==(i=String(i||a.opts.line.style).toLowerCase())&&"dotted"!==i&&(i="solid"),l.className="--plot-line",l.style.position="absolute",l.style.display="inline-block",l.style.boxSizing="border-box",l.style.margin="0px",l.style.padding="0px",l.style.border="none",l.style.background="none",l.style.width=String(c)+"px",l.style.height="0px",l.style.borderBottom=String(r)+"px "+i+" "+n,l.style.left=String(t.x)+"px",l.style.bottom=String(t.y)+"px",l.style.transformOrigin="left bottom",l.style.transform="rotate("+String(F.atan2(-d,h))+"rad)",s?l.hitId=s:(l.hitId=L(a.nextColor=v(a.nextColor)),a.hitDict[l.hitId]={type:"line",pos:[t,e],extra:o||null}),a.drawLayer.appendChild(l),a},drawRect:function(t,e,r,n,i,o,s,a){var l=this,d=document.createElement("div");return n=null!=n?n:l.opts.shape.border.size,i=String(i||l.opts.shape.border.color).toLowerCase(),"dashed"!==(o=String(o||l.opts.shape.border.style).toLowerCase())&&"dotted"!==o&&(o="solid"),s=String(null!=s?s:l.opts.shape.fill).toLowerCase(),d.className="--plot-rectangle",d.style.position="absolute",d.style.display="inline-block",d.style.overflow="hidden",d.style.boxSizing="border-box",d.style.margin="0px",d.style.padding="0px",d.style.background=s||"none",d.style.width=String(e.x)+"px",d.style.height=String(e.y)+"px",d.style.border=0<n?String(n)+"px "+o+" "+i:"none",d.style.left=String(t.x-e.x/2)+"px",d.style.top=String(l.height()-t.y-e.y/2)+"px",d.style.transformOrigin="center center",d.style.transform="rotate("+String((r||0)*F.PI/180)+"rad)",d.hitId=L(l.nextColor=v(l.nextColor)),l.hitDict[d.hitId]={type:"rect",center:t,side:e,rotation:r,extra:a||null},l.drawLayer.appendChild(d),l},drawEllipse:function(t,e,r,n,i,o,s,a){var l=this,d=document.createElement("div");return n=null!=n?n:l.opts.shape.border.size,i=String(i||l.opts.shape.border.color).toLowerCase(),"dashed"!==(o=String(o||l.opts.shape.border.style).toLowerCase())&&"dotted"!==o&&(o="solid"),s=String(null!=s?s:l.opts.shape.fill).toLowerCase(),d.className="--plot-ellipse",d.style.position="absolute",d.style.display="inline-block",d.style.overflow="hidden",d.style.boxSizing="border-box",d.style.margin="0px",d.style.padding="0px",d.style.background=s||"none",d.style.width=String(2*e.x)+"px",d.style.height=String(2*e.y)+"px",d.style.border=0<n?String(n)+"px "+o+" "+i:"none",d.style.borderRadius="50%",d.style.left=String(t.x-e.x)+"px",d.style.top=String(l.height()-t.y-e.y)+"px",d.style.transformOrigin="center center",d.style.transform="rotate("+String((r||0)*F.PI/180)+"rad)",d.hitId=L(l.nextColor=v(l.nextColor)),l.hitDict[d.hitId]={type:"ellipse",center:t,radius:e,rotation:r,extrar:a||null},l.drawLayer.appendChild(d),l},drawArc:function(t,e,r,n,i,o,s,a,l,d){var h,c,y,u,p,x,g,f,w,b=this,m=b.height();for(g=(u=S({x:t.x,y:m-t.y},e,r||0,n?1:0,i?1:0,{x:o.x,y:m-o.y}))[6],f=u[6]+u[7],w=1-u[8],x=q().translate(u[0],m-u[1]).mul(q().rotate(-u[2]).mul(q().scale(u[3],(w?1:-1)*u[4]))),p=C(function(e,r){"number"==typeof r&&(r={x:r,y:r});return{x:function(t){return e.x+r.x*F.cos(t)},y:function(t){return e.y+r.y*F.sin(t)}}}({x:0,y:0},{x:u[5],y:u[5]}),w?-f+F.PI:g,w?-g+F.PI:f,.1,20).map(function(t){return x.transform(t)}),s=null!=s?s:b.opts.line.size,a=String(a||b.opts.line.color).toLowerCase(),"dashed"!==(l=String(l||b.opts.line.style).toLowerCase())&&"dotted"!==l&&(l="solid"),h=L(b.nextColor=v(b.nextColor)),b.hitDict[h]={type:"arc",params:[t,e,r,n,i,o],extra:d||null},c=0,y=p.length;c+1<y;c++)b.drawLine(p[c],p[c+1],s,a,l,null,h);return b},drawBezier:function(t,e,r,n,i){var o,s,a,l=this,d=C({x:f(t.map(function(t){return t.x})),y:f(t.map(function(t){return t.y}))},0,1,.5,20);for(e=null!=e?e:l.opts.line.size,r=String(r||l.opts.line.color).toLowerCase(),"dashed"!==(n=String(n||l.opts.line.style).toLowerCase())&&"dotted"!==n&&(n="solid"),o=L(l.nextColor=v(l.nextColor)),l.hitDict[o]={type:"bezier",points:t,extra:i||null},s=0,a=d.length;s+1<a;s++)l.drawLine(d[s],d[s+1],e,r,n,null,o);return l},fitText:function(r,t,e,n,i,o){var s,a,l,d=t.split(/\s+/),h=[],c=document.createElement("span");function y(t){var e=document.createElement("span");e.style.position="relative",e.style.display="block",e.style.padding="0px",e.style.margin="0px",e.textContent=t.join(" "),r.appendChild(e)}for(c.style.display="inline-block",c.style.fontSize=r.style.fontSize,c.style.fontFamily=r.style.fontFamily,c.style.padding="0px",c.style.visibility="hidden",this.drawLayer.appendChild(c),s=0,a=d.length;s<a;s++)l=h.concat(d[s]),c.textContent=l.join(" "),i<c.clientWidth&&0<s?(y(h),h=[d[s]],0):h=l;return h.length&&y(h),this.drawLayer.removeChild(c),this},drawText:function(t,e,r,n,i){var o=this,s=document.createElement("div");return r=null!=r?r:o.opts.text.size,n=String(n||o.opts.text.color).toLowerCase(),s.className="--plot-text",s.style.position="absolute",s.style.display="inline-block",s.style.overflow="hidden",s.style.boxSizing="border-box",s.style.margin="0px",s.style.padding="0px",s.style.border="none",s.style.background="none",s.style.color=n,s.style.fontSize=String(r)+"px",s.style.fontFamily="sans-serif",s.style.textAlign="left",s.style.left=String(t.x)+"px",s.style.top=String(o.height()-t.y-r)+"px",i?(s.style.lineHeight=String(1.2*r)+"px",o.fitText(s,String(e),t.x,t.y,i,1.2*r)):s.textContent=String(e),o.drawLayer.appendChild(s),o}}),(z.Canvas=function t(e,r){if(!(this instanceof t))return new t(e,r);this.container=e,this.opts=X(!0,this.defaultOpts(),r||{})})[e]=X(new z,{constructor:z.Canvas,hitCanvas:null,dispose:function(){var t=this;return t.container&&t.hitCanvas&&t.container.removeChild(t.hitCanvas),t.hitCanvas=null,z[e].dispose.call(t)},init:function(){var t=this;return t.drawLayer||(t.nextColor=[0,0,0],t.hitDict={},t.hitTarget=null,t.hitCanvas=document.createElement("canvas"),t.hitCanvas.style.position="absolute",t.hitCanvas.style.left="0px",t.hitCanvas.style.top="0px",t.hitCanvas.style.width="100%",t.hitCanvas.style.height="100%",t.hitCanvas.style.display="block",t.hitCanvas.style.margin="0px",t.hitCanvas.style.padding="0px",t.hitCanvas.style.border="none",t.hitCanvas.style.visibility="hidden",t.container.appendChild(t.hitCanvas),t.drawLayer=document.createElement("canvas"),t.drawLayer.className="--plot-canvas",t.drawLayer.style.position="absolute",t.drawLayer.style.left="0px",t.drawLayer.style.top="0px",t.drawLayer.style.width="100%",t.drawLayer.style.height="100%",t.drawLayer.style.display="block",t.drawLayer.style.margin="0px",t.drawLayer.style.padding="0px",t.drawLayer.style.border="none",t.container.appendChild(t.drawLayer),t.hitCanvas.width=t.width(),t.hitCanvas.height=t.height(),t.drawLayer.width=t.width(),t.drawLayer.height=t.height(),t.handler=z.handler.bind(t),t.drawLayer.addEventListener("touchstart",t.handler,!1),t.drawLayer.addEventListener("mouseenter",t.handler,!1),t.drawLayer.addEventListener("click",t.handler,!1)),t},objAt:function(t,e){var r;return this.hitCanvas&&(r="#"+L(this.hitCanvas.getContext("2d").getImageData(F.round(e.left),F.round(e.top),1,1).data),l.call(this.hitDict,r))?this.hitDict[r]:null},resize:function(){var t=this;return t.drawLayer&&(t.hitCanvas.width=t.width(),t.hitCanvas.height=t.height(),t.drawLayer.width=t.width(),t.drawLayer.height=t.height()),t},clear:function(){var t=this,e=t.drawLayer.getContext("2d");return e.fillStyle=String(t.opts.background.color),e.fillRect(0,0,t.drawLayer.width,t.drawLayer.height),(e=t.hitCanvas.getContext("2d")).clearRect(0,0,t.hitCanvas.width,t.hitCanvas.height),t.nextColor=[0,0,0],t.hitDict={},t.hitTarget=null,t},background:function(t){return this.opts.background.color=t,this},drawPoint:function(t,e,r,n){var i,o=this,s=o.drawLayer.getContext("2d");return e=null!=e?e:o.opts.point.size,r=String(r||o.opts.point.color).toLowerCase(),s.resetTransform(),s.fillStyle=r,s.beginPath(),s.arc(t.x,o.height()-t.y,e,0,2*F.PI),s.closePath(),s.fill(),i="#"+L(o.nextColor=v(o.nextColor)),o.hitDict[i]={type:"point",pos:t,extra:n||null},(s=o.hitCanvas.getContext("2d")).resetTransform(),s.fillStyle=i,s.beginPath(),s.arc(t.x,o.height()-t.y,e,0,2*F.PI),s.closePath(),s.fill(),o},drawLine:function(t,e,r,n,i,o){var s,a=this,l=a.height(),d=a.drawLayer.getContext("2d");return r=null!=r?r:a.opts.line.size,n=String(n||a.opts.line.color).toLowerCase(),"dashed"!==(i=String(i||a.opts.line.style).toLowerCase())&&"dotted"!==i&&(i="solid"),d.resetTransform(),d.beginPath(),"dashed"===i?d.setLineDash([4,4]):"dotted"===i?d.setLineDash([2,4]):d.setLineDash([]),d.lineWidth=r,d.strokeStyle=n,d.moveTo(t.x,l-t.y),d.lineTo(e.x,l-e.y),d.stroke(),d.closePath(),s="#"+L(a.nextColor=v(a.nextColor)),a.hitDict[s]={type:"line",pos:[t,e],extra:o||null},(d=a.hitCanvas.getContext("2d")).resetTransform(),d.beginPath(),d.lineWidth=r,d.strokeStyle=s,d.moveTo(t.x,l-t.y),d.lineTo(e.x,l-e.y),d.stroke(),d.closePath(),a},drawRect:function(t,e,r,n,i,o,s,a){var l,d=this,h=d.height(),c=d.drawLayer.getContext("2d");return n=null!=n?n:d.opts.shape.border.size,i=String(i||d.opts.shape.border.color).toLowerCase(),"dashed"!==(o=String(o||d.opts.shape.border.style).toLowerCase())&&"dotted"!==o&&(o="solid"),s=String(null!=s?s:d.opts.shape.fill).toLowerCase(),c.resetTransform(),c.translate(t.x,h-t.y),c.rotate((r||0)*F.PI/180),c.beginPath(),0<n&&("dashed"===o?c.setLineDash([4,4]):"dotted"===o?c.setLineDash([2,4]):c.setLineDash([]),c.lineWidth=n,c.strokeStyle=i),c.rect(-e.x/2,-e.y/2,e.x,e.y),s&&"none"!==s&&(c.fillStyle=s,c.fill()),0<n&&c.stroke(),c.closePath(),c.resetTransform(),l="#"+L(d.nextColor=v(d.nextColor)),d.hitDict[l]={type:"rect",center:t,side:e,rotation:r,extra:a||null},(c=d.hitCanvas.getContext("2d")).resetTransform(),c.translate(t.x,h-t.y),c.rotate((r||0)*F.PI/180),c.beginPath(),0<n&&(c.lineWidth=n,c.strokeStyle=l),c.rect(-e.x/2,-e.y/2,e.x,e.y),c.fillStyle=l,c.fill(),0<n&&c.stroke(),c.closePath(),c.resetTransform(),d},drawEllipse:function(t,e,r,n,i,o,s,a){var l,d=this,h=d.height(),c=d.drawLayer.getContext("2d");return n=null!=n?n:d.opts.shape.border.size,i=String(i||d.opts.shape.border.color).toLowerCase(),"dashed"!==(o=String(o||d.opts.shape.border.style).toLowerCase())&&"dotted"!==o&&(o="solid"),s=String(null!=s?s:d.opts.shape.fill).toLowerCase(),c.resetTransform(),c.beginPath(),0<n&&("dashed"===o?c.setLineDash([4,4]):"dotted"===o?c.setLineDash([2,4]):c.setLineDash([]),c.lineWidth=n,c.strokeStyle=i),c.ellipse(t.x,h-t.y,e.x,e.y,(r||0)*F.PI/180,0,2*F.PI,0),s&&"none"!==s&&(c.fillStyle=s,c.fill()),0<n&&c.stroke(),c.closePath(),c.resetTransform(),l="#"+L(d.nextColor=v(d.nextColor)),d.hitDict[l]={type:"ellipse",center:t,radius:e,rotation:r,extra:a||null},(c=d.hitCanvas.getContext("2d")).resetTransform(),c.beginPath(),0<n&&(c.lineWidth=n,c.strokeStyle=l),c.ellipse(t.x,h-t.y,e.x,e.y,(r||0)*F.PI/180,0,2*F.PI,0),c.fillStyle=l,c.fill(),0<n&&c.stroke(),c.closePath(),c.resetTransform(),d},drawArc:function(t,e,r,n,i,o,s,a,l,d){var h,c,y=this,u=y.height(),p=y.drawLayer.getContext("2d");return s=null!=s?s:y.opts.line.size,a=String(a||y.opts.line.color).toLowerCase(),l=String(l||y.opts.line.style).toLowerCase(),c=S({x:t.x,y:u-t.y},e,r||0,n?1:0,i?1:0,{x:o.x,y:u-o.y}),p.resetTransform(),p.beginPath(),"dashed"===l?p.setLineDash([4,4]):"dotted"===l?p.setLineDash([2,4]):p.setLineDash([]),p.lineWidth=s,p.strokeStyle=a,p.translate(c[0],c[1]),p.rotate(c[2]),p.scale(c[3],c[4]),p.arc(0,0,c[5],c[6],c[6]+c[7],1-c[8]),p.stroke(),p.closePath(),p.resetTransform(),h="#"+L(y.nextColor=v(y.nextColor)),y.hitDict[h]={type:"arc",params:[t,e,r,n,i,o],extra:d||null},(p=y.hitCanvas.getContext("2d")).resetTransform(),p.beginPath(),p.lineWidth=s,p.strokeStyle=h,p.translate(c[0],c[1]),p.rotate(c[2]),p.scale(c[3],c[4]),p.arc(0,0,c[5],c[6],c[6]+c[7],1-c[8]),p.stroke(),p.closePath(),p.resetTransform(),y},drawBezier:function(t,e,r,n,i){var o,s=this,a=s.height(),l=s.drawLayer.getContext("2d");return e=null!=e?e:s.opts.line.size,r=String(r||s.opts.line.color).toLowerCase(),"dashed"!==(n=String(n||s.opts.line.style).toLowerCase())&&"dotted"!==n&&(n="solid"),l.resetTransform(),l.beginPath(),"dashed"===n?l.setLineDash([4,4]):"dotted"===n?l.setLineDash([2,4]):l.setLineDash([]),l.lineWidth=e,l.strokeStyle=r,l.moveTo(t[0].x,a-t[0].y),l.bezierCurveTo(t[1].x,a-t[1].y,t[2].x,a-t[2].y,t[3].x,a-t[3].y),l.stroke(),l.closePath(),o="#"+L(s.nextColor=v(s.nextColor)),s.hitDict[o]={type:"bezier",points:t,extra:i||null},(l=s.hitCanvas.getContext("2d")).resetTransform(),l.beginPath(),l.lineWidth=e,l.strokeStyle=o,l.moveTo(t[0].x,a-t[0].y),l.bezierCurveTo(t[1].x,a-t[1].y,t[2].x,a-t[2].y,t[3].x,a-t[3].y),l.stroke(),l.closePath(),s},fitText:function(t,e,r,n,i,o){var s,a,l,d=e.split(/\s+/),h=[];for(s=0,a=d.length;s<a;s++)l=h.concat(d[s]),i<t.measureText(l.join(" ")).width&&0<s?(t.fillText(h.join(" "),r,n),h=[d[s]],n+=o):h=l;return h.length&&t.fillText(h.join(" "),r,n),this},drawText:function(t,e,r,n,i){var o=this,s=o.height(),a=o.drawLayer.getContext("2d");return r=null!=r?r:o.opts.text.size,n=String(n||o.opts.text.color).toLowerCase(),a.resetTransform(),a.font=String(r)+"px sans-serif",a.fillStyle=n,i?o.fitText(a,String(e),t.x,s-t.y,i,1.2*r):a.fillText(String(e),t.x,s-t.y),o}}),(z.Svg=function t(e,r){if(!(this instanceof t))return new t(e,r);this.container=e,this.opts=X(!0,this.defaultOpts(),r||{})})[e]=X(new z,{constructor:z.Svg,NS:"http://www.w3.org/2000/svg",init:function(){var t=this;return t.drawLayer||(t.nextColor=[0,0,0],t.hitDict={},t.hitTarget=null,t.drawLayer=document.createElementNS(t.NS,"svg"),t.drawLayer.setAttribute("class","--plot-svg"),t.drawLayer.style.position="absolute",t.drawLayer.style.left="0px",t.drawLayer.style.top="0px",t.drawLayer.style.width="100%",t.drawLayer.style.height="100%",t.drawLayer.style.display="block",t.drawLayer.style.overflow="hidden",t.drawLayer.style.margin="0px",t.drawLayer.style.padding="0px",t.drawLayer.style.border="none",t.drawLayer.style.backgroundColor=t.opts.background.color,t.container.appendChild(t.drawLayer),t.drawLayer.setAttribute("viewBox","0 0 "+String(t.width())+" "+String(t.height())),t.handler=z.handler.bind(t),t.drawLayer.addEventListener("touchstart",t.handler,!1),t.drawLayer.addEventListener("mouseenter",t.handler,!1),t.drawLayer.addEventListener("click",t.handler,!1)),t},objAt:function(t,e){var r=t.target?t.target.hitId:null;return r&&l.call(this.hitDict,r)?this.hitDict[r]:null},resize:function(){var t=this;return t.drawLayer&&t.drawLayer.setAttribute("viewBox","0 0 "+String(t.width())+" "+String(t.height())),t},clear:function(){var t=this;return t.drawLayer.innerHTML="",t.nextColor=[0,0,0],t.hitDict={},t.hitTarget=null,t},background:function(t){return this.opts.background.color=t,this.drawLayer.style.backgroundColor=this.opts.background.color,this},drawPoint:function(t,e,r,n){var i=this,o=i.height(),s=document.createElementNS(i.NS,"circle");return e=null!=e?e:i.opts.point.size,r=String(r||i.opts.point.color).toLowerCase(),s.setAttribute("class","--plot-point"),s.setAttribute("cx",String(t.x)),s.setAttribute("cy",String(o-t.y)),s.setAttribute("r",String(e)),s.setAttribute("stroke-width","1px"),s.setAttribute("stroke",r),s.setAttribute("fill",r),s.hitId=L(i.nextColor=v(i.nextColor)),i.hitDict[s.hitId]={type:"point",pos:t,extra:n||null},i.drawLayer.appendChild(s),i},drawLine:function(t,e,r,n,i,o){var s=this,a=s.height(),l=document.createElementNS(s.NS,"line");return r=null!=r?r:s.opts.line.size,n=String(n||s.opts.line.color).toLowerCase(),"dashed"!==(i=String(i||s.opts.line.style).toLowerCase())&&"dotted"!==i&&(i="solid"),l.setAttribute("class","--plot-line"),l.setAttribute("x1",String(t.x)),l.setAttribute("y1",String(a-t.y)),l.setAttribute("x2",String(e.x)),l.setAttribute("y2",String(a-e.y)),l.setAttribute("stroke-width",String(r)+"px"),l.setAttribute("stroke",n),"dashed"===i?l.setAttribute("stroke-dasharray","4 4"):"dotted"===i&&l.setAttribute("stroke-dasharray","2 4"),l.hitId=L(s.nextColor=v(s.nextColor)),s.hitDict[l.hitId]={type:"line",pos:[t,e],extra:o||null},s.drawLayer.appendChild(l),s},drawRect:function(t,e,r,n,i,o,s,a){var l=this,d=l.height(),h=document.createElementNS(l.NS,"rect");return n=null!=n?n:l.opts.shape.border.size,i=String(i||l.opts.shape.border.color).toLowerCase(),"dashed"!==(o=String(o||l.opts.shape.border.style).toLowerCase())&&"dotted"!==o&&(o="solid"),s=String(null!=s?s:l.opts.shape.fill).toLowerCase(),h.setAttribute("class","--plot-rectangle"),h.setAttribute("x",String(t.x-e.x/2)),h.setAttribute("y",String(d-t.y-e.y/2)),h.setAttribute("width",String(e.x)),h.setAttribute("height",String(e.y)),h.setAttribute("transform","rotate("+String(r||0)+" "+String(t.x)+" "+String(d-t.y)+")"),0<n&&(h.setAttribute("stroke-width",String(n)+"px"),h.setAttribute("stroke",i),"dashed"===o?h.setAttribute("stroke-dasharray","4 4"):"dotted"===o&&h.setAttribute("stroke-dasharray","2 4")),h.setAttribute("fill",s||"none"),h.hitId=L(l.nextColor=v(l.nextColor)),l.hitDict[h.hitId]={type:"rect",center:t,side:e,rotation:r,extra:a||null},l.drawLayer.appendChild(h),l},drawEllipse:function(t,e,r,n,i,o,s,a){var l=this,d=l.height(),h=document.createElementNS(l.NS,"ellipse");return n=null!=n?n:l.opts.shape.border.size,i=String(i||l.opts.shape.border.color).toLowerCase(),"dashed"!==(o=String(o||l.opts.shape.border.style).toLowerCase())&&"dotted"!==o&&(o="solid"),s=String(null!=s?s:l.opts.shape.fill).toLowerCase(),h.setAttribute("class","--plot-ellipse"),h.setAttribute("cx",String(t.x)),h.setAttribute("cy",String(d-t.y)),h.setAttribute("rx",String(e.x)),h.setAttribute("ry",String(e.y)),h.setAttribute("transform","rotate("+String(r||0)+" "+String(t.x)+" "+String(d-t.y)+")"),0<n&&(h.setAttribute("stroke-width",String(n)+"px"),h.setAttribute("stroke",i),"dashed"===o?h.setAttribute("stroke-dasharray","4 4"):"dotted"===o&&h.setAttribute("stroke-dasharray","2 4")),h.setAttribute("fill",s||"none"),h.hitId=L(l.nextColor=v(l.nextColor)),l.hitDict[h.hitId]={type:"ellipse",center:t,radius:e,rotation:r,extra:a||null},l.drawLayer.appendChild(h),l},drawArc:function(t,e,r,n,i,o,s,a,l,d){var h=this,c=h.height(),y=document.createElementNS(h.NS,"path");return s=null!=s?s:h.opts.line.size,a=String(a||h.opts.line.color).toLowerCase(),"dashed"!==(l=String(l||h.opts.line.style).toLowerCase())&&"dotted"!==l&&(l="solid"),y.setAttribute("class","--plot-arc"),y.setAttribute("d","M "+String(t.x)+" "+String(c-t.y)+" A "+String(e.x)+" "+String(e.y)+" "+String(r||0)+" "+String(n?1:0)+" "+String(i?1:0)+" "+String(o.x)+" "+String(c-o.y)),y.setAttribute("stroke-width",String(s)+"px"),y.setAttribute("stroke",a),y.setAttribute("fill","none"),"dashed"===l?y.setAttribute("stroke-dasharray","4 4"):"dotted"===l&&y.setAttribute("stroke-dasharray","2 4"),y.hitId=L(h.nextColor=v(h.nextColor)),h.hitDict[y.hitId]={type:"arc",params:[t,e,r,n,i,o],extra:d||null},h.drawLayer.appendChild(y),h},drawBezier:function(t,e,r,n,i){var o=this,s=o.height(),a=document.createElementNS(o.NS,"path");return e=null!=e?e:o.opts.line.size,r=String(r||o.opts.line.color).toLowerCase(),"dashed"!==(n=String(n||o.opts.line.style).toLowerCase())&&"dotted"!==n&&(n="solid"),a.setAttribute("class","--plot-bezier"),a.setAttribute("d","M "+String(t[0].x)+","+String(s-t[0].y)+" C "+String(t[1].x)+","+String(s-t[1].y)+" "+String(t[2].x)+","+String(s-t[2].y)+" "+String(t[3].x)+","+String(s-t[3].y)),a.setAttribute("stroke-width",String(e)+"px"),a.setAttribute("stroke",r),"dashed"===n?a.setAttribute("stroke-dasharray","4 4"):"dotted"===n&&a.setAttribute("stroke-dasharray","2 4"),a.hitId=L(o.nextColor=v(o.nextColor)),o.hitDict[a.hitId]={type:"bezier",points:t,extra:i||null},o.drawLayer.appendChild(a),o},fitText:function(r,t,n,e,i,o){var s,a,l,d,h=this,c=t.split(/\s+/),y=[],u=0,p=r.cloneNode(!1);function x(t){var e=document.createElementNS(h.NS,"tspan");e.setAttribute("x",n),e.setAttribute("dy",u),e.textContent=t.join(" "),r.appendChild(e),0===u&&(u=o)}for(p.style.visibility="hidden",h.drawLayer.appendChild(p),s=0,a=c.length;s<a;s++)l=y.concat(c[s]),p.textContent=l.join(" "),d=p.getBBox(),i<F.round(d.width)&&0<s?(x(y),y=[c[s]],0):y=l;return y.length&&x(y),h.drawLayer.removeChild(p),h},drawText:function(t,e,r,n,i){var o,s=this,a=s.height();return r=null!=r?r:s.opts.text.size,n=String(n||s.opts.text.color).toLowerCase(),(o=document.createElementNS(s.NS,"text")).setAttribute("class","--plot-text"),o.setAttribute("x",t.x),o.setAttribute("y",a-t.y),o.setAttribute("fill",n),o.style.fontSize=String(r)+"px",o.style.fontFamily="sans-serif",i?s.fitText(o,String(e),t.x,a-t.y,i,1.2*r):o.textContent=String(e),s.drawLayer.appendChild(o),s}}),T[e]={constructor:T,renderer:null,opts:null,dispose:function(){var t=this;return t.tooltip&&document.body.removeChild(t.tooltip),t.renderer=null,t.tooltip=null,t.opts=null,t},defaultOpts:function(){return{tolerance:.001,depth:20,npoints:60,background:{color:"#ffffff"},padding:{top:20,right:20,bottom:20,left:20},text:{size:14,color:"#000000"},point:{size:4,color:"#000000"},line:{size:1,color:"#000000",style:"solid"},shape:{border:{size:1,color:"#000000",style:"solid"},fill:"none"},colors:null,labels:null,axes:{x:{size:2,color:"#000000",style:"solid",ticks:{size:1,color:"rgba(0,0,0,0.5)",style:"dashed",text:{size:16,color:"#000000"},step:"auto",scale:"linear"}},y:{size:2,color:"#000000",style:"solid",ticks:{size:1,color:"rgba(0,0,0,0.5)",style:"dashed",text:{size:16,color:"#000000"},step:"auto",scale:"linear"}}}}},boundingBox:function(t){var e,r,n,i,o,s=t.length;if("number"==typeof t[0]){for(r=1/0,i=-1/0,e=0;e<s;e++)a(t[e])&&(t[e]<r&&(r=t[e]),t[e]>i&&(i=t[e]));return{min:r,max:i}}for(n=r=1/0,o=i=-1/0,e=0;e<s;e++)H.isFinite(t[e])&&(t[e].x<r&&(r=t[e].x),t[e].y<n&&(n=t[e].y),t[e].x>i&&(i=t[e].x),t[e].y>o&&(o=t[e].y));return{min:{x:r,y:n},max:{x:i,y:o}}},sample:function(t,e,r,n){var i,o,s,a,l;for(n=X(O(this.opts),n||{}),null==e&&(e=0),null==r&&(r=e+1),t=h(t.x)&&h(t.y)?t:{x:Y,y:t},a=(r-e)/(l=F.ceil(2*n.npoints/3)),i=[],s=0;s<l;s++)o=C(t,e+s*a,e+(s+1)*a,n.tolerance,n.depth),i=i.concat(0<s?o.slice(1):o);return i},width:function(){return this.renderer.init().width()},height:function(){return this.renderer.init().height()},resize:function(){return this.renderer.init().resize(),this},clear:function(){return this.renderer.init().background(this.opts.background.color).clear(),this},text:function(t,e,r){return r=X(!0,O(this.opts),r||{}),this.renderer.init(),this.renderer.drawText(t,e,r.text.size,r.text.color),this},point:function(t,e){var r,n;for(e=X(!0,O(this.opts),e||{}),this.renderer.init(),B(t)||(t=[t]),r=0,n=t.length;r<n;r++)H.isFinite(t[r])&&this.renderer.drawPoint(t[r],e.point.size,e.point.color);return this},line:function(t,e){var r,n;for(e=X(!0,O(this.opts),e||{}),this.renderer.init(),B(t)||(t=[t]),r=0,n=t.length;r+1<n;r++)H.isFinite(t[r])&&H.isFinite(t[r+1])&&this.renderer.drawLine(t[r],t[r+1],e.line.size,e.line.color,e.line.style);return this},rectangle:function(e,r,n,i){var o=this;return o.renderer.init(),arguments.length<=2&&B(e)?(i=X(!0,O(o.opts),r||{}),e.forEach(function(t){i=X(!0,i,t[3]||{}),n=t[2],"number"==typeof(r=t[1])&&(r={x:r,y:r}),e=t[0],o.renderer.drawRect(e,r,n||0,i.shape.border.size,i.shape.border.color,i.shape.border.style,i.shape.fill)})):(i=X(!0,O(o.opts),i||{}),o.renderer.drawRect(e,r,n||0,i.shape.border.size,i.shape.border.color,i.shape.border.style,i.shape.fill)),o},ellipse:function(e,r,n,i){var o=this;return o.renderer.init(),arguments.length<=2&&B(e)?(i=X(!0,O(o.opts),r||{}),e.forEach(function(t){i=X(!0,i,t[3]||{}),n=t[2],"number"==typeof(r=t[1])&&(r={x:r,y:r}),e=t[0],o.renderer.drawEllipse(e,r,n||0,i.shape.border.size,i.shape.border.color,i.shape.border.style,i.shape.fill)})):(i=X(!0,O(o.opts),i||{}),"number"==typeof r&&(r={x:r,y:r}),o.renderer.drawEllipse(e,r,n||0,i.shape.border.size,i.shape.border.color,i.shape.border.style,i.shape.fill)),o},arc:function(e,r,n,i,o,s,a){var l=this;return l.renderer.init(),arguments.length<=2&&B(e)?(a=X(!0,O(l.opts),r||{}),e.forEach(function(t){a=X(!0,a,t[6]||{}),s=t[5],o=t[4],i=t[3],n=t[2],"number"==typeof(r=t[1])&&(r={x:r,y:r}),e=t[0],l.renderer.drawArc(e,r,+(n||0),i?1:0,o?1:0,s,a.line.size,a.line.color,a.line.style)})):(a=X(!0,O(l.opts),a||{}),"number"==typeof r&&(r={x:r,y:r}),l.renderer.drawArc(e,r,+(n||0),i?1:0,o?1:0,s,a.line.size,a.line.color,a.line.style)),l},bezier:function(t,e){var r=this;return e=X(!0,O(r.opts),e||{}),r.renderer.init(),B(t)||(t=[t]),2===t.length?r.renderer.drawLine(t[0],t[1],e.line.size,e.line.color,e.line.style):4<=t.length&&r.renderer.drawBezier(t,e.line.size,e.line.color,e.line.style),r},spline:function(t,e){B(t)||(t=[t]);var r,n,i,o=this,s={x:b(t.map(p)),y:b(t.map(x))};if(n=(i=s.x.reduce(function(t,e,n){return e.reduce(function(t,e,r){return t.push(new H(s.x[n][r],s.y[n][r])),t},t)},[])).length,e=X(!0,O(o.opts),e||{}),o.renderer.init(),2===n)o.renderer.drawLine(i[0],i[1],e.line.size,e.line.color,e.line.style);else if(4<=i.length)for(r=0;r<n;r+=4)o.renderer.drawBezier([i[r],i[r+1],i[r+2],i[r+3]],e.line.size,e.line.color,e.line.style);return o},label:function(t,e,r,n){var i=this;return n=X(!0,O(i.opts),n||{}),i.renderer.init(),"left"===t.x?t.x=0:"right"===t.x?t.x=i.renderer.width()-e.x:"center"===t.x&&(t.x=(i.renderer.width()-e.x)/2),"bottom"===t.y?t.y=e.y:"top"===t.y?t.y=i.renderer.height():"center"===t.y&&(t.y=(i.renderer.height()+e.y)/2),i.renderer.drawRect({x:t.x+e.x/2,y:t.y-e.y/2},e,0,n.shape.border.size,n.shape.border.color,n.shape.border.style,n.shape.fill),i.renderer.drawText({x:t.x+n.padding.left,y:t.y-n.padding.top},r,n.text.size,n.text.color,e.x-n.padding.right-n.padding.left),i},graph:function(t,e,r,n){var i,o,s,a,l,d,h,c,y,u,p,x,g,f,w,b,m,v,L,S,C,k,z,T,A,E,D,P,I=this,N=[],j=[],M=[],R=[];if((n=X(!0,O(I.opts),n||{})).axes&&n.axes.x&&n.axes.x.ticks&&n.axes.x.ticks.scale,w=Y,n.axes&&n.axes.y&&n.axes.y.ticks&&n.axes.y.ticks.scale,b=Y,u=F.max(0,n.padding&&n.padding.left||0),p=F.max(0,n.padding&&n.padding.right||0),x=F.max(0,n.padding&&n.padding.top||0),g=F.max(0,n.padding&&n.padding.bottom||0),o=(i=B(t)?t:I.sample(t,e,r,n)).map(function(t){return t.apply(w,b)}),I.renderer.init(),a=I.renderer.width(),l=I.renderer.height(),d=(f=I.boundingBox(o)).max.x-f.min.x+1e-6,h=f.max.y-f.min.y+1e-6,y=F.min((a-u-p)/d,(l-x-g)/h),c=(s=(new q).translate(-f.min.x,-f.min.y).scale(y).translate(u+(a-u-p-y*d)/2,g+(l-x-g-y*h)/2)).transform(new H(0,0)).apply(F.round),n.axes){if(n.axes.y&&n.axes.y.ticks&&(S="auto"===n.axes.y.ticks.step?h/8:n.axes.y.ticks.step,0<(z=F.round(y*S))))for(E=0,l<(C=c.y)&&(E-=D=F.ceil((C-l)/z),C-=D*z),C<0&&(E+=D=F.ceil(-C/z),C+=D*z),T=C===c.y?1:0,k=C+(A=-1)*z,m=b(C+=T*z),v=b(k);m<=l-x||g<=v;)g<=m&&m<=l-x&&(I.renderer.drawLine({x:u,y:m},{x:a-p,y:m},n.axes.y.ticks.size,n.axes.y.ticks.color,n.axes.y.ticks.style),j.push({y:m,v:(E+T)*S})),g<=v&&v<=l-x&&(I.renderer.drawLine({x:u,y:v},{x:a-p,y:v},n.axes.y.ticks.size,n.axes.y.ticks.color,n.axes.y.ticks.style),R.push({y:v,v:(E+A)*S})),k-=z,T++,A--,m=b(C+=z),v=b(k);if(n.axes.x&&n.axes.x.ticks&&(L="auto"===n.axes.x.ticks.step?d/8:n.axes.x.ticks.step,0<(z=F.round(y*L))))for(E=0,a<(C=c.x)&&(E-=D=F.ceil((C-a)/z),C-=D*z),C<0&&(E+=D=F.ceil(-C/z),C+=D*z),T=C===c.x?1:0,k=C+(A=-1)*z,m=w(C+=T*z),v=w(k);m<=a-p||u<=v;)u<=m&&m<=a-p&&(I.renderer.drawLine({x:m,y:g},{x:m,y:l-x},n.axes.x.ticks.size,n.axes.x.ticks.color,n.axes.x.ticks.style),N.push({x:m,v:(E+T)*L})),u<=v&&v<=l-p&&(I.renderer.drawLine({x:v,y:g},{x:v,y:l-x},n.axes.x.ticks.size,n.axes.x.ticks.color,n.axes.x.ticks.style),M.push({x:v,v:(E+A)*L})),k-=z,T++,A--,m=w(C+=z),v=w(k);n.axes.x&&c.y>=g&&c.y<=l-x&&I.renderer.drawLine({x:u,y:c.y},{x:a-p,y:c.y},n.axes.x.size,n.axes.x.color,n.axes.x.style),n.axes.y&&c.x>=u&&c.x<=a-p&&I.renderer.drawLine({x:c.x,y:g},{x:c.x,y:l-x},n.axes.y.size,n.axes.y.color,n.axes.y.style)}for(P=function(t,e,r,n){var i;"enter"===t?(I.tooltip.classList.remove("--plot-hide-tooltip"),I.tooltip.classList.add("--plot-show-tooltip"),I.tooltip.style.left=String(r.pageX)+"px",I.tooltip.style.top=String(r.pageY)+"px",i=(r.x-e.pos[0].x)/(e.pos[1].x-e.pos[0].x),I.tooltip.innerHTML="x: "+String(W(e.extra.p1.x,e.extra.p2.x,i))+"<br />y: "+String(W(e.extra.p1.y,e.extra.p2.y,i))):"leave"===t?(I.tooltip.classList.remove("--plot-show-tooltip"),I.tooltip.classList.add("--plot-hide-tooltip")):"move"===t&&(I.tooltip.style.left=String(r.pageX)+"px",I.tooltip.style.top=String(r.pageY)+"px",i=(r.x-e.pos[0].x)/(e.pos[1].x-e.pos[0].x),I.tooltip.innerHTML="x: "+String(W(e.extra.p1.x,e.extra.p2.x,i))+"<br />y: "+String(W(e.extra.p1.y,e.extra.p2.y,i)))},T=0,E=(o=o.map(function(t){return s.transform(t)})).length;T+1<E;T++)H.isFinite(o[T])&&H.isFinite(o[T+1])&&I.renderer.drawLine(o[T],o[T+1],n.line.size,n.line.color,n.line.style,{p1:i[T],p2:i[T+1],listener:{enter:P,leave:P,move:P}});if(n.axes){if(n.axes.x&&n.axes.x.ticks&&n.axes.x.ticks.text&&0<n.axes.x.ticks.text.size&&(N.length||M.length)){for(C=c.y>=g&&c.y<=l-x?c.y+5:g+5,z=F.ceil(N.length/3),T=0;T<N.length;T+=z)0!==N[T].v&&I.renderer.drawText({x:N[T].x+2,y:C},N[T].v,n.axes.x.ticks.text.size,n.axes.x.ticks.text.color);for(z=F.ceil(M.length/3),T=0;T<M.length;T+=z)0!==M[T].v&&I.renderer.drawText({x:M[T].x+2,y:C},M[T].v,n.axes.x.ticks.text.size,n.axes.x.ticks.text.color)}if(n.axes.y&&n.axes.y.ticks&&n.axes.y.ticks.text&&0<n.axes.y.ticks.text.size&&(j.length||R.length)){for(C=c.x>=u&&c.x<=a-p?c.x+5:u+5,z=F.ceil(j.length/3),T=0;T<j.length;T+=z)0!==j[T].v&&I.renderer.drawText({x:C,y:j[T].y+2},j[T].v,n.axes.y.ticks.text.size,n.axes.y.ticks.text.color);for(z=F.ceil(R.length/3),T=0;T<R.length;T+=z)0!==R[T].v&&I.renderer.drawText({x:C,y:R[T].y+2},R[T].v,n.axes.y.ticks.text.size,n.axes.y.ticks.text.color)}}return I},chart:function(t,e,r){var n,i,o,s,a,l,d,h,c,y,u,p,x,g,f,w,b,m,v,L,S,C,k,z,T,A,E,D,P,I=this,N=[],j=[];if(t=String(t||"vbar").toLowerCase(),(r=X(!0,O(I.opts),r||{})).colors=r.colors||M(e.length),r.labels=r.labels||function(t){var e,r=new Array(t);for(e=0;e<t;e++)r[e]="Entry: "+String(e+1);return r}(e.length),z=F.max(0,r.padding&&r.padding.left||0),T=F.max(0,r.padding&&r.padding.right||0),A=F.max(0,r.padding&&r.padding.top||0),E=F.max(0,r.padding&&r.padding.bottom||0),v="hbar"===t?(r.axes&&r.axes.x?r.axes.x.ticks:null)||null:(r.axes&&r.axes.y?r.axes.y.ticks:null)||null,n=e.map(function(t,e){return new H(e,t)}),k=I.boundingBox(n),w=n.length,I.renderer.init(),i=I.renderer.width(),o=I.renderer.height(),p="hbar"===t?(L=i,S=z,C=T,v&&v.text&&0<v.text.size&&(D=E+2,E+=2*v.text.size),F.max(1,(o-E-A)/(w+.2*(w-1)))):(L=o,S=E,C=A,v&&v.text&&0<v.text.size&&(D=z+2,z+=2*v.text.size),"line"===t?F.max(1,(i-z-T)/w):F.max(1,(i-z-T)/(w+.2*(w-1)))),d=k.min.y<0?-k.min.y:0,l=S+(a=(L-S-C)/(h=k.max.y+d))*d,x=p/2,s=(new q).scale(1,a),r.axes&&v&&(m="auto"===v.step?h/8:v.step,0<(u=F.round(a*m))))for(w=0,L<(c=l)&&(w-=b=F.ceil((c-L)/u),c-=b*u),c<0&&(w+=b=F.ceil(-c/u),c+=b*u),y=c+(f=-1)*u,c+=(g=c===l?1:0)*u;c<=L-C||S<=y;)S<=c&&c<=L-C&&(I.renderer.drawLine("hbar"===t?{y:E,x:c}:{x:z,y:c},"hbar"===t?{y:o-A,x:c}:{x:i-T,y:c},v.size,v.color,v.style),N.push({p:c,v:(w+g)*m})),S<=y&&y<=L-C&&(I.renderer.drawLine("hbar"===t?{y:E,x:y}:{x:z,y:y},"hbar"===t?{y:o-A,x:y}:{x:i-T,y:y},v.size,v.color,v.style),j.push({p:y,v:(w+f)*m})),c+=u,y-=u,g++,f--;if(n=n.map(function(t){return s.transform(t)}),P=function(t,e,r,n){"enter"===t?(I.tooltip.classList.remove("--plot-hide-tooltip"),I.tooltip.classList.add("--plot-show-tooltip"),I.tooltip.style.left=String(r.pageX)+"px",I.tooltip.style.top=String(r.pageY)+"px",I.tooltip.innerHTML=e.extra.label+"<br />"+e.extra.value):"leave"===t?(I.tooltip.classList.remove("--plot-show-tooltip"),I.tooltip.classList.add("--plot-hide-tooltip")):"move"===t&&(I.tooltip.style.left=String(r.pageX)+"px",I.tooltip.style.top=String(r.pageY)+"px")},"line"===t){for(g=0,w=n.length,u=0;g+1<w;g++,u+=p)H.isFinite(n[g])&&H.isFinite(n[g+1])&&I.renderer.drawLine({x:z+u,y:l+n[g].y},{x:z+u+p,y:l+n[g+1].y},r.line.size,r.line.color,r.line.style);for(g=0,w=n.length,u=0;g<w;g++,u+=p)H.isFinite(n[g])&&I.renderer.drawPoint({x:z+u,y:l+n[g].y},r.point.size,r.colors[g],{label:r.labels[g],value:String(e[g]),listener:{enter:P,leave:P,move:P}})}else for(g=0,w=n.length,u=0;g<w;g++,u+=p)H.isFinite(n[g])&&("hbar"===t?I.renderer.drawRect({y:E+x+u+(0<g?.2*u:0),x:l+n[w-1-g].y/2},{y:p,x:F.abs(n[w-1-g].y)},0,0,"transparent","solid",r.colors[w-1-g],{label:r.labels[w-1-g],value:String(e[w-1-g]),listener:{enter:P,leave:P,move:P}}):I.renderer.drawRect({x:z+x+u+(0<g?.2*u:0),y:l+n[g].y/2},{x:p,y:F.abs(n[g].y)},0,0,"transparent","solid",r.colors[g],{label:r.labels[g],value:String(e[g]),listener:{enter:P,leave:P,move:P}}));if(r.axes&&v&&v.text&&0<v.text.size&&(N.length||j.length)){for(c=D,u=F.ceil(N.length/3),g=0;g<N.length;g+=u)0!==N[g].v&&I.renderer.drawText("hbar"===t?{x:N[g].p+2,y:c}:{y:N[g].p+2,x:c},N[g].v,v.text.size,v.text.color);for(u=F.ceil(j.length/3),g=0;g<j.length;g+=u)0!==j[g].v&&I.renderer.drawText("hbar"===t?{x:j[g].p+2,y:c}:{y:j[g].p+2,x:c},j[g].v,v.text.size,v.text.color)}return I}},T.VERSION="1.0.0",T.Util={clone:O,extend:X,debounce:function(r,n){var i=null;return function(){var t=this,e=arguments;clearTimeout(i),i=setTimeout(function(){r.apply(t,e)},n)}},subdivide:C,hex2rgb:function(t){return[(t=parseInt("#"===t.charAt(0)?t.slice(1):t,16))>>16&255,t>>8&255,255&t]},rgb2hex:L,hsb2rgb:c,rgb2hsb:function(t){var e=0,r=0,n=0,i=t[0],o=t[1],s=t[2],a=F.min(i,o,s),l=F.max(i,o,s),d=l-a;n=l;e=0!=(r=0!=l?255*d/l:0)?i===l?(o-s)/d:o===l?2+(s-i)/d:4+(i-o)/d:-1;(e*=60)<0&&(e+=360);return r=100*r/255,n=100*n/255,[F.round(e),F.round(r),F.round(n)]},palette:M},T.Point=H,T.Matrix=q,T.Renderer=z,T}.call(t)||1)&&"function"==typeof define&&define.amd&&define(function(){return t[e]})}("undefined"!=typeof self?self:this,"Plot");