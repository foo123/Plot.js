/**
*
*  Plot.js
*  simple chart and function graph plotting library
*  which can render to Canvas, SVG and plain HTML
*  version 1.1.0
*  https://github.com/foo123/Plot.js
*
**/
!function(t,e,r){"use strict";e in t||(t[e]=r.call(t)||1)&&"function"==typeof define&&define.amd&&define(function(){return t[e]})}("undefined"!=typeof self?self:this,"Plot",function(){"use strict";var X=Math,e="prototype",H=1e-6,p=/\s+/,f=X.PI,v=2*f,s=Object[e].hasOwnProperty,r=Object[e].toString;function Y(t,e){var r=this;if(!(r instanceof Y))return new Y(t,e);t instanceof Y?(r.x=t.x,r.y=t.y):null!=t&&null!=e?(r.x=t,r.y=e):(r.x=0,r.y=0)}function B(t){if(!(this instanceof B))return new B(t);t instanceof B?this.v=t.v.slice():t&&9<=t.length?this.v=t.slice(0,9):this.v=[1,0,0,0,1,0,0,0,1]}function i(t,e){}function n(t,e){var r=this;if(!(r instanceof n))return new n(t,e);r.renderer=t instanceof n.Renderer?t:new n.Renderer.Html(t||document.body),r.tooltip=document.createElement("div"),r.tooltip.className="--plot-tooltip --plot-hide-tooltip",r.tooltip.style.position="absolute",document.body.appendChild(r.tooltip),r.opts=V(!0,r.defaultOpts(),e||{})}function d(t){return r.call(t).slice(8,-1)}function M(t){return"number"==typeof t}function R(t){return"Array"===d(t)}function h(t){return"Object"===d(t)}function c(t){return"function"==typeof t}function q(t){return!isNaN(t)&&isFinite(t)}function m(t){return t*f/180}function U(t){var e,r,i,n=d(t);if("Array"===n)for(e=new Array(i=t.length),r=0;r<i;++r)e[r]=U(t[r]);else if("Object"===n)for(r in e={},t)s.call(t,r)&&(e[r]=U(t[r]));else e="String"===n?t.slice():t;return e}function V(){for(var t,e,r=arguments,i=r.length,n=!!i&&!0===r[0],o=n?1:0,l=(o<i?r[o]:{})||{},a=1+o;a<i;++a)for(e in t=r[a])s.call(t,e)&&(n&&h(l[e])&&h(t[e])?l[e]=V(!0,l[e],t[e]):l[e]=t[e]);return l}function S(t){if(t){if(t[2]<255)return[t[0],t[1],t[2]+1];if(t[1]<255)return[t[0],t[1]+1,0];if(t[0]<255)return[t[0]+1,0,0]}return[0,0,0]}function L(t){t=[Number(t[0]).toString(16),Number(t[1]).toString(16),Number(t[2]).toString(16)];return 1===t[0].length&&(t[0]="0"+t[0]),1===t[1].length&&(t[1]="0"+t[1]),1===t[2].length&&(t[2]="0"+t[2]),t[0]+t[1]+t[2]}function a(t){var e,r,i,n=X.round(t[0]),o=X.round(255*t[1]/100),l=X.round(255*t[2]/100);return 0===o?e=r=i=l:(l=n%60*((t=l)-(o=(255-o)*l/255))/60,360===n&&(n=0),n<60?(e=t,r=(i=o)+l):n<120?(i=o,e=(r=t)-l):n<180?(r=t,i=(e=o)+l):n<240?(e=o,r=(i=t)-l):n<300?(i=t,e=(r=o)+l):i=n<360?(r=o,(e=t)-l):r=e=0),[X.round(e),X.round(r),X.round(i)]}function Z(t,e){e=String(e||"hex").toLowerCase();for(var r,i=new Array(t),n=X.min(t,60),o=0,l=0;o<t;++o)r=a([360*l/n,100,100]),i[o]="rgb"===e?"rgb("+r.join(",")+")":"#"+L(r),n<=(l+=2)&&(l=1&l?0:1);return i}function O(t){return t}function F(t,e,r,i){return r=r||0,!0===i?t+r*(e-t):r<0?t:1<r?e:t+r*(e-t)}function y(t,e,r,i,n,o,l,a){if(i<=r)return t;var s=l||new Y(e.x(r),e.y(r)),d=a||new Y(e.x(i),e.y(i)),l=(r+i)/2,a=new Y(e.x(l),e.y(l));return Y.isFinite(a)?o<=0||a.dist(s,d)<=n?t.push(d):(y(t,e,r,l,n,o-1,s,a),y(t,e,l,i,n,o-1,a,d)):o<=0?Y.isFinite(d)&&t.push(d):(y(t,e,r,l,n,o-1,s,a),y(t,e,l,i,n,o-1,a,d)),t}function x(t,e){e=e||window.event;var r,i,n,t=t.getBoundingClientRect(),e=e.changedTouches&&e.changedTouches.length?(r=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY,n=e.changedTouches[0].pageX,e.changedTouches[0].pageY):(r=e.clientX,i=e.clientY,n=e.pageX,e.pageY);return{localX:+r-t.left,localY:+i-t.top,clientX:r,clientY:i,pageX:n,pageY:e}}return Y[e]={constructor:Y,x:0,y:0,dispose:function(){var t=this;return t.x=null,t.y=null,t},eq:function(t,e){var r=this;return 2<=arguments.length?X.hypot(r.x-t.x,r.y-t.y)<=(e||0):r.x===t.x&&r.y===t.y},dist:function(t,e){var r=e.x-t.x,i=e.y-t.y;return X.abs(i*this.x-r*this.y+e.x*t.y-e.y*t.x)/X.hypot(i,r)},apply:function(t,e){return null==e&&(e=t),t instanceof B?t.transform(this):c(t)&&c(e)?new Y(t(this.x),e(this.y)):this}},Y.isFinite=function(t){return q(t.x)&&q(t.y)},B[e]={constructor:B,v:null,dispose:function(){return this.v=null,this},eq:function(t){for(var e=this.v,r=t.v,i=0;i<9;++i)if(e[i]!==r[i])return!1;return!0},mul:function(t){var e,r,i=this.v;return t instanceof Y||s.call(t,"x")&&s.call(t,"y")?(e=t.x,r=t.y,new Y(i[0]*e+i[1]*r+i[2],i[3]*e+i[4]*r+i[5])):t instanceof B?(t=t.v,new B([i[0]*t[0]+i[1]*t[3]+i[2]*t[6],i[0]*t[1]+i[1]*t[4]+i[2]*t[7],i[0]*t[2]+i[1]*t[5]+i[2]*t[8],i[3]*t[0]+i[4]*t[3]+i[5]*t[6],i[3]*t[1]+i[4]*t[4]+i[5]*t[7],i[3]*t[2]+i[4]*t[5]+i[5]*t[8],i[6]*t[0]+i[7]*t[3]+i[8]*t[6],i[6]*t[1]+i[7]*t[4]+i[8]*t[7],i[6]*t[2]+i[7]*t[5]+i[8]*t[8]])):this},skew:function(t,e){return new B([1,t||0,0,e||0,1,0,0,0,1]).mul(this)},scale:function(t,e,r,i){return 1===arguments.length&&(e=t),new B([t,0,-t*(r=r||0)+r,0,e,-e*(i=i||0)+i,0,0,1]).mul(this)},rotate:function(t,e,r){r=r||0,e=e||0,t=t||0;var i=X.sin(t),t=X.cos(t);return new B([t,-i,e-t*e+i*r,i,t,r-t*r-i*e,0,0,1]).mul(this)},translate:function(t,e){return new B([1,0,t||0,0,1,e||0,0,0,1]).mul(this)},transform:function(t){return this.mul(t)}},i[e]={constructor:i,container:null,opts:null,drawLayer:null,nextColor:null,hitDict:null,hitTarget:null,handler:null,dispose:function(){var t=this;return t.container&&t.drawLayer&&(t.handler&&(t.drawLayer.removeEventListener("touchstart",t.handler,!1),t.drawLayer.removeEventListener("mouseenter",t.handler,!1),t.drawLayer.removeEventListener("click",t.handler,!1)),t.container.removeChild(t.drawLayer)),t.container=null,t.opts=null,t.drawLayer=null,t.nextColor=null,t.hitDict=null,t.hitTarget=null,t.handler=null,t},defaultOpts:function(){return{background:{color:"#ffffff"},text:{size:12,color:"#000000"},point:{size:4,color:"#000000"},line:{size:1,color:"#000000",style:"solid"},shape:{border:{size:1,color:"#000000",style:"solid"},fill:"none"},label:{text:{size:12,color:"#000000"},border:{size:1,color:"#000000",style:"solid"},fill:"none",padding:{top:0,right:0,bottom:0,left:0}}}},width:function(){return this.drawLayer?this.drawLayer.clientWidth:0},height:function(){return this.drawLayer?this.drawLayer.clientHeight:0},resize:function(){return this},init:void 0,objAt:void 0,clear:void 0,background:void 0,drawPoint:void 0,drawLine:void 0,drawRect:void 0,drawEllipse:void 0,drawSector:void 0,drawText:void 0,drawLabel:void 0},i.handler=function(t){var e,r,i=this,n=t.type,o=i.drawLayer===t.target,l=function(t,e,r,i){t&&e&&e.extra&&e.extra.listener&&c(e.extra.listener[t])&&e.extra.listener[t](t,e,r,i)};o&&("touchstart"===n?(i.drawLayer.addEventListener("touchmove",i.handler,!1),i.drawLayer.addEventListener("touchend",i.handler,!1),i.drawLayer.addEventListener("touchcancel",i.handler,!1)):"touchend"===n||"touchcancel"===n?(i.drawLayer.removeEventListener("touchmove",i.handler,!1),i.drawLayer.removeEventListener("touchend",i.handler,!1),i.drawLayer.removeEventListener("touchcancel",i.handler,!1),i.hitTarget&&(l("leave",i.hitTarget.obj,i.hitTarget.pos,t),i.hitTarget=null)):"mouseenter"===n?(i.drawLayer.addEventListener("mouseleave",i.handler,!1),i.drawLayer.addEventListener("mousemove",i.handler,!1)):"mouseleave"===n&&(i.drawLayer.removeEventListener("mouseleave",i.handler,!1),i.drawLayer.removeEventListener("mousemove",i.handler,!1),i.hitTarget&&(l("leave",i.hitTarget.obj,i.hitTarget.pos,t),i.hitTarget=null))),"touchstart"===n||"mouseenter"===n?(e=x(i.drawLayer,t),(r=i.objAt(t,e))&&(i.hitTarget&&i.hitTarget.obj!==r&&(l("leave",i.hitTarget.obj,i.hitTarget.pos=e,t),i.hitTarget=null),i.hitTarget||(i.hitTarget={obj:r,pos:e},l("enter",i.hitTarget.obj,i.hitTarget.pos=e,t)))):"touchmove"!==n&&"mousemove"!==n&&"click"!==n||(e=x(i.drawLayer,t),r=i.objAt(t,e),o&&!r||(r?(i.hitTarget&&(i.hitTarget.obj!==r?(l("leave",i.hitTarget.obj,i.hitTarget.pos=e,t),i.hitTarget=null):"click"!==n&&l("move",i.hitTarget.obj,i.hitTarget.pos=e,t)),i.hitTarget||(i.hitTarget={obj:r,pos:e},l("enter",i.hitTarget.obj,i.hitTarget.pos=e,t)),"click"===n&&l("click",i.hitTarget.obj,i.hitTarget.pos=e,t)):i.hitTarget&&(l("leave",i.hitTarget.obj,i.hitTarget.pos=e,t),i.hitTarget=null)))},(i.Html=function t(e,r){if(!(this instanceof t))return new t(e,r);this.container=e,this.opts=V(!0,this.defaultOpts(),r||{})})[e]=V(Object.create(i[e]),{constructor:i.Html,init:function(){var t=this;return t.drawLayer||(t.nextColor=[0,0,0],t.hitDict={},t.hitTarget=null,t.drawLayer=document.createElement("div"),t.drawLayer.className="--plot-html",t.drawLayer.style.position="absolute",t.drawLayer.style.left="0px",t.drawLayer.style.top="0px",t.drawLayer.style.width="100%",t.drawLayer.style.height="100%",t.drawLayer.style.display="block",t.drawLayer.style.overflow="hidden",t.drawLayer.style.margin="0px",t.drawLayer.style.padding="0px",t.drawLayer.style.border="none",t.drawLayer.style.backgroundColor=t.opts.background.color,t.container.appendChild(t.drawLayer),t.handler=i.handler.bind(t),t.drawLayer.addEventListener("touchstart",t.handler,!1),t.drawLayer.addEventListener("mouseenter",t.handler,!1),t.drawLayer.addEventListener("click",t.handler,!1)),t},objAt:function(t,e){t=t.target?t.target.hitId:null;return t&&s.call(this.hitDict,t)?this.hitDict[t]:null},clear:function(){var t=this;return t.drawLayer.innerHTML="",t.nextColor=[0,0,0],t.hitDict={},t.hitTarget=null,t},background:function(t){return this.opts.background.color=t,this.drawLayer.style.backgroundColor=this.opts.background.color,this},drawPoint:function(t,e,r,i){var n=this,o=document.createElement("div");return e=null!=e?e:n.opts.point.size,r=String(r||n.opts.point.color).toLowerCase(),o.className="--plot-point",o.style.position="absolute",o.style.display="inline-block",o.style.overflow="hidden",o.style.boxSizing="border-box",o.style.margin="0px",o.style.padding="0px",o.style.width=String(2*e)+"px",o.style.height=String(2*e)+"px",o.style.border="1px solid "+r,o.style.borderRadius="50%",o.style.backgroundColor=r,o.style.left=String(t.x)+"px",o.style.top=String(t.y)+"px",o.style.transformOrigin="left top",o.style.transform="translate(-50%,-50%)",o.hitId=L(n.nextColor=S(n.nextColor)),n.hitDict[o.hitId]={type:"point",pos:t,extra:i||null},n.drawLayer.appendChild(o),n},drawLine:function(t,e,r,i,n,o){var l=this,a=document.createElement("div"),s=e.y-t.y,d=e.x-t.x,h=X.hypot(s,d);return r=null!=r?r:l.opts.line.size,i=String(i||l.opts.line.color).toLowerCase(),"dashed"!==(n=String(n||l.opts.line.style).toLowerCase())&&"dotted"!==n&&(n="solid"),a.className="--plot-line",a.style.position="absolute",a.style.display="inline-block",a.style.boxSizing="border-box",a.style.margin="0px",a.style.padding="0px",a.style.border="none",a.style.background="none",a.style.width=String(h)+"px",a.style.height="0px",a.style.borderBottom=String(r)+"px "+n+" "+i,a.style.left=String(t.x)+"px",a.style.top=String(t.y)+"px",a.style.transformOrigin="left top",a.style.transform="rotate("+String(X.atan2(s,d))+"rad)",a.hitId=L(l.nextColor=S(l.nextColor)),l.hitDict[a.hitId]={type:"line",pos:[t,e],extra:o||null},l.drawLayer.appendChild(a),l},drawRect:function(t,e,r,i,n,o,l,a){var s=this,d=document.createElement("div");return i=null!=i?i:s.opts.shape.border.size,n=String(n||s.opts.shape.border.color).toLowerCase(),"dashed"!==(o=String(o||s.opts.shape.border.style).toLowerCase())&&"dotted"!==o&&(o="solid"),l=String(null!=l?l:s.opts.shape.fill).toLowerCase(),d.className="--plot-rectangle",d.style.position="absolute",d.style.display="inline-block",d.style.overflow="hidden",d.style.boxSizing="border-box",d.style.margin="0px",d.style.padding="0px",d.style.background=l||"none",d.style.width=String(e.x)+"px",d.style.height=String(e.y)+"px",d.style.border=0<i?String(i)+"px "+o+" "+n:"none",d.style.left=String(t.x-e.x/2)+"px",d.style.top=String(t.y-e.y/2)+"px",d.style.transformOrigin="center center",d.style.transform="rotate("+String(m(r||0))+"rad)",d.hitId=L(s.nextColor=S(s.nextColor)),s.hitDict[d.hitId]={type:"rect",center:t,side:e,rotation:r,extra:a||null},s.drawLayer.appendChild(d),s},drawEllipse:function(t,e,r,i,n,o,l,a){var s=this,d=document.createElement("div");return i=null!=i?i:s.opts.shape.border.size,n=String(n||s.opts.shape.border.color).toLowerCase(),"dashed"!==(o=String(o||s.opts.shape.border.style).toLowerCase())&&"dotted"!==o&&(o="solid"),l=String(null!=l?l:s.opts.shape.fill).toLowerCase(),d.className="--plot-ellipse",d.style.position="absolute",d.style.display="inline-block",d.style.overflow="hidden",d.style.boxSizing="border-box",d.style.margin="0px",d.style.padding="0px",d.style.background=l||"none",d.style.width=String(2*e.x)+"px",d.style.height=String(2*e.y)+"px",d.style.border=0<i?String(i)+"px "+o+" "+n:"none",d.style.borderRadius="50%",d.style.left=String(t.x-e.x)+"px",d.style.top=String(t.y-e.y)+"px",d.style.transformOrigin="center center",d.style.transform="rotate("+String(m(r||0))+"rad)",d.hitId=L(s.nextColor=S(s.nextColor)),s.hitDict[d.hitId]={type:"ellipse",center:t,radius:e,rotation:r,extra:a||null},s.drawLayer.appendChild(d),s},drawSector:function(t,e,r,i,n,o,l,a,s){var d,h,c,y,p,x,u,g,f,b=this,w=document.createElement("div");return n=null!=n?n:b.opts.shape.border.size,o=String(o||b.opts.shape.border.color).toLowerCase(),"dashed"!==(l=String(l||b.opts.shape.border.style).toLowerCase())&&"dotted"!==l&&(l="solid"),a=String(null!=a?a:b.opts.shape.fill).toLowerCase(),c=m(r),h=2*e,d=m(i)-c,u=t.x,g=t.y,y=u-e,p=g-e,x=u+e,f=g+e,w.className="--plot-sector",w.style.position="absolute",w.style.display="inline-block",w.style.overflow="hidden",w.style.boxSizing="border-box",w.style.margin="0px",w.style.padding="0px",w.style.background=a||"none",w.style.width=String(h)+"px",w.style.height=String(h)+"px",w.style.border=0<n?String(n)+"px "+l+" "+o:"none",w.style.borderRadius="50%",w.style.left=String(y)+"px",w.style.top=String(p)+"px",d+H<=v&&(o={x:x,y:g},f="polygon("+((d={x:u+e*X.cos(d),y:g+e*X.sin(d)}).y<g?u<=d.x?[o,t,d,{x:x,y:p},{x:y,y:p},{x:y,y:f},{x:x,y:f}]:[o,t,d,{x:y,y:p},{x:y,y:f},{x:x,y:f}]:d.x<u?[o,t,d,{x:y,y:d.y},{x:y,y:f},{x:x,y:f}]:[o,t,d,{x:x,y:f}]).map(function(t){return String(t.x-y)+"px "+String(t.y-p)+"px"}).join(",")+")",w.style.WebkitClipPath=f,w.style.clipPath=f,w.style.transformOrigin="center center",w.style.transform="rotate("+String(c)+"rad)"),w.hitId=L(b.nextColor=S(b.nextColor)),b.hitDict[w.hitId]={type:"sector",center:t,radius:e,a0:r,a1:i,extra:s||null},b.drawLayer.appendChild(w),b},fitText:function(t,e,r,i){var n,o,l,a,s=t.split(p),d=[],h=[],c=0;for(e.style.visibility="hidden",this.drawLayer.appendChild(e),n=0,o=s.length;n<o;++n)l=d.concat(s[n]),e.textContent=l.join(" "),r<(a=e.clientWidth)&&0<d.length?(h.push(d.join(" ")),d=[s[n]]):(d=l,c=X.max(c,a));return d.length&&(h.push(d.join(" ")),c=X.max(c,a)),this.drawLayer.removeChild(e),{lines:h,width:c,height:(h.length-1)*i}},createText:function(t,e,r,i,n){var o=document.createElement("div");return o.className="--plot-text",o.style.position="absolute",o.style.display="inline-block",o.style.overflow="hidden",o.style.boxSizing="border-box",o.style.margin="0px",o.style.padding="0px",o.style.border="none",o.style.background="none",o.style.color=r,o.style.fontSize=String(e)+"px",o.style.fontFamily="sans-serif",o.style.textAlign="left",o.style.whiteSpace="nowrap",o.style.lineHeight=String(n)+"px",(r=document.createElement("span")).style.display="inline-block",r.style.fontSize=String(e)+"px",r.style.fontFamily="sans-serif",r.style.whiteSpace="nowrap",r.style.padding="0px",r.style.margin="0px",r.style.border="none",(n=this.fitText(String(t),r,null==i?1/0:i,null==n?1.2*e:n)).el=o,n},drawText:function(t,e,r,i,n){var o,l,a=this;return r=null!=r?r:a.opts.text.size,i=String(i||a.opts.text.color).toLowerCase(),l=1.2*r,(o="String"===d(e)?a.createText(e,r,i,n,l):e).el.style.fontSize=String(r)+"px",o.el.style.fontFamily="sans-serif",o.el.style.textAlign="left",o.el.style.whiteSpace="nowrap",o.el.style.lineHeight=String(l)+"px",o.el.style.left=String(t.x)+"px",o.el.style.top=String(t.y-r)+"px",o.lines.forEach(function(t){var e=document.createElement("span");e.style.position="relative",e.style.display="block",e.style.padding="0px",e.style.margin="0px",e.style.border="none",e.style.whiteSpace="nowrap",e.textContent=t,o.el.appendChild(e)}),a.drawLayer.appendChild(o.el),a},drawLabel:function(t,e,r,i){var n,o,l,a=this;return i=V(!0,U(a.opts),i||{}),n="auto"===e.x?1/0:e.x-i.label.padding.left-i.label.padding.right,o=1.2*i.label.text.size,l=a.createText(String(r),i.label.text.size,i.label.text.color,n,o),n="auto"===e.x?l.width+i.label.padding.left+i.label.padding.right:e.x,o="auto"===e.y?l.height+i.label.padding.top+i.label.padding.bottom:e.y,e=t.x,t=t.y,"left"===e?e=0:"right"===e?e=a.width()-n:"center"===e&&(e=(a.width()-n)/2),"top"===t?t=0:"bottom"===t?t=a.height()-o-i.label.text.size/2:"center"===t&&(t=(a.height()-o-i.label.text.size/2)/2),a.drawRect({x:e+n/2,y:t+o/2},{x:n,y:o},0,i.label.border.size,i.label.border.color,i.label.border.style,i.label.fill),e+=i.label.padding.left,t+=i.label.padding.top,l.el.style.left=String(e)+"px",l.el.style.top=String(t-i.text.size/2)+"px",l.lines.forEach(function(t){var e=document.createElement("span");e.style.position="relative",e.style.display="block",e.style.padding="0px",e.style.margin="0px",e.style.border="none",e.textContent=t,l.el.appendChild(e)}),a.drawLayer.appendChild(l.el),a}}),(i.Canvas=function t(e,r){if(!(this instanceof t))return new t(e,r);this.container=e,this.opts=V(!0,this.defaultOpts(),r||{})})[e]=V(Object.create(i[e]),{constructor:i.Canvas,hitCanvas:null,dispose:function(){var t=this;return t.container&&t.hitCanvas&&t.container.removeChild(t.hitCanvas),t.hitCanvas=null,i[e].dispose.call(t)},init:function(){var t=this;return t.drawLayer||(t.nextColor=[0,0,0],t.hitDict={},t.hitTarget=null,t.hitCanvas=document.createElement("canvas"),t.hitCanvas.style.position="absolute",t.hitCanvas.style.left="0px",t.hitCanvas.style.top="0px",t.hitCanvas.style.width="100%",t.hitCanvas.style.height="100%",t.hitCanvas.style.display="block",t.hitCanvas.style.margin="0px",t.hitCanvas.style.padding="0px",t.hitCanvas.style.border="none",t.hitCanvas.style.visibility="hidden",t.container.appendChild(t.hitCanvas),t.drawLayer=document.createElement("canvas"),t.drawLayer.className="--plot-canvas",t.drawLayer.style.position="absolute",t.drawLayer.style.left="0px",t.drawLayer.style.top="0px",t.drawLayer.style.width="100%",t.drawLayer.style.height="100%",t.drawLayer.style.display="block",t.drawLayer.style.margin="0px",t.drawLayer.style.padding="0px",t.drawLayer.style.border="none",t.container.appendChild(t.drawLayer),t.hitCanvas.width=t.width(),t.hitCanvas.height=t.height(),t.drawLayer.width=t.width(),t.drawLayer.height=t.height(),t.handler=i.handler.bind(t),t.drawLayer.addEventListener("touchstart",t.handler,!1),t.drawLayer.addEventListener("mouseenter",t.handler,!1),t.drawLayer.addEventListener("click",t.handler,!1)),t},objAt:function(t,e){var r;return this.hitCanvas&&(r="#"+L(this.hitCanvas.getContext("2d").getImageData(X.round(e.localX),X.round(e.localY),1,1).data),s.call(this.hitDict,r))?this.hitDict[r]:null},resize:function(){var t=this;return t.drawLayer&&(t.hitCanvas.width=t.width(),t.hitCanvas.height=t.height(),t.drawLayer.width=t.width(),t.drawLayer.height=t.height()),t},clear:function(){var t=this,e=t.drawLayer.getContext("2d");return e.fillStyle=String(t.opts.background.color),e.fillRect(0,0,t.drawLayer.width,t.drawLayer.height),(e=t.hitCanvas.getContext("2d")).clearRect(0,0,t.hitCanvas.width,t.hitCanvas.height),t.nextColor=[0,0,0],t.hitDict={},t.hitTarget=null,t},background:function(t){return this.opts.background.color=t,this},drawPoint:function(t,e,r,i){var n=this,o=n.drawLayer.getContext("2d");return e=null!=e?e:n.opts.point.size,r=String(r||n.opts.point.color).toLowerCase(),o.resetTransform(),o.fillStyle=r,o.beginPath(),o.arc(t.x,t.y,e,0,v),o.closePath(),o.fill(),r="#"+L(n.nextColor=S(n.nextColor)),n.hitDict[r]={type:"point",pos:t,extra:i||null},(o=n.hitCanvas.getContext("2d")).resetTransform(),o.fillStyle=r,o.beginPath(),o.arc(t.x,t.y,e,0,v),o.closePath(),o.fill(),n},drawLine:function(t,e,r,i,n,o){var l=this,a=l.drawLayer.getContext("2d");return r=null!=r?r:l.opts.line.size,i=String(i||l.opts.line.color).toLowerCase(),"dashed"!==(n=String(n||l.opts.line.style).toLowerCase())&&"dotted"!==n&&(n="solid"),a.resetTransform(),a.beginPath(),"dashed"===n?a.setLineDash([4,4]):"dotted"===n?a.setLineDash([2,4]):a.setLineDash([]),a.lineWidth=r,a.strokeStyle=i,a.moveTo(t.x,t.y),a.lineTo(e.x,e.y),a.stroke(),i="#"+L(l.nextColor=S(l.nextColor)),l.hitDict[i]={type:"line",pos:[t,e],extra:o||null},(a=l.hitCanvas.getContext("2d")).resetTransform(),a.beginPath(),a.lineWidth=r,a.strokeStyle=i,a.moveTo(t.x,t.y),a.lineTo(e.x,e.y),a.stroke(),l},drawRect:function(t,e,r,i,n,o,l,a){var s=this,d=s.drawLayer.getContext("2d");return i=null!=i?i:s.opts.shape.border.size,n=String(n||s.opts.shape.border.color).toLowerCase(),"dashed"!==(o=String(o||s.opts.shape.border.style).toLowerCase())&&"dotted"!==o&&(o="solid"),l=String(null!=l?l:s.opts.shape.fill).toLowerCase(),d.resetTransform(),d.translate(t.x,t.y),d.rotate(m(r||0)),d.beginPath(),0<i&&("dashed"===o?d.setLineDash([4,4]):"dotted"===o?d.setLineDash([2,4]):d.setLineDash([]),d.lineWidth=i,d.strokeStyle=n),d.rect(-e.x/2,-e.y/2,e.x,e.y),l&&"none"!==l&&(d.fillStyle=l,d.fill()),0<i&&d.stroke(),d.closePath(),d.resetTransform(),l="#"+L(s.nextColor=S(s.nextColor)),s.hitDict[l]={type:"rect",center:t,side:e,rotation:r,extra:a||null},(d=s.hitCanvas.getContext("2d")).resetTransform(),d.translate(t.x,t.y),d.rotate(m(r||0)),d.beginPath(),0<i&&(d.lineWidth=i,d.strokeStyle=l),d.rect(-e.x/2,-e.y/2,e.x,e.y),d.fillStyle=l,d.fill(),0<i&&d.stroke(),d.closePath(),d.resetTransform(),s},drawEllipse:function(t,e,r,i,n,o,l,a){var s=this,d=s.drawLayer.getContext("2d");return i=null!=i?i:s.opts.shape.border.size,n=String(n||s.opts.shape.border.color).toLowerCase(),"dashed"!==(o=String(o||s.opts.shape.border.style).toLowerCase())&&"dotted"!==o&&(o="solid"),l=String(null!=l?l:s.opts.shape.fill).toLowerCase(),d.resetTransform(),d.beginPath(),0<i&&("dashed"===o?d.setLineDash([4,4]):"dotted"===o?d.setLineDash([2,4]):d.setLineDash([]),d.lineWidth=i,d.strokeStyle=n),d.ellipse(t.x,t.y,e.x,e.y,m(r||0),0,v,0),l&&"none"!==l&&(d.fillStyle=l,d.fill()),0<i&&d.stroke(),d.closePath(),d.resetTransform(),l="#"+L(s.nextColor=S(s.nextColor)),s.hitDict[l]={type:"ellipse",center:t,radius:e,rotation:r,extra:a||null},(d=s.hitCanvas.getContext("2d")).resetTransform(),d.beginPath(),0<i&&(d.lineWidth=i,d.strokeStyle=l),d.ellipse(t.x,t.y,e.x,e.y,m(r||0),0,v,0),d.fillStyle=l,d.fill(),0<i&&d.stroke(),d.closePath(),d.resetTransform(),s},drawSector:function(t,e,r,i,n,o,l,a,s){var d,h,c=this,y=c.drawLayer.getContext("2d");return n=null!=n?n:c.opts.shape.border.size,o=String(o||c.opts.shape.border.color).toLowerCase(),"dashed"!==(l=String(l||c.opts.shape.border.style).toLowerCase())&&"dotted"!==l&&(l="solid"),a=String(null!=a?a:c.opts.shape.fill).toLowerCase(),d=m(r),h=m(i),y.resetTransform(),y.beginPath(),0<n&&("dashed"===l?y.setLineDash([4,4]):"dotted"===l?y.setLineDash([2,4]):y.setLineDash([]),y.lineWidth=n,y.strokeStyle=o),y.moveTo(t.x,t.y),y.arc(t.x,t.y,e,d,h,!1),y.closePath(),a&&"none"!==a&&(y.fillStyle=a,y.fill()),0<n&&y.stroke(),y.resetTransform(),a="#"+L(c.nextColor=S(c.nextColor)),c.hitDict[a]={type:"sector",center:t,radius:e,a0:r,a1:i,extra:s||null},(y=c.hitCanvas.getContext("2d")).resetTransform(),y.beginPath(),0<n&&(y.lineWidth=n,y.strokeStyle=a),y.moveTo(t.x,t.y),y.arc(t.x,t.y,e,d,h,!1),y.closePath(),y.fillStyle=a,y.fill(),0<n&&y.stroke(),y.resetTransform(),c},fitText:function(t,e,r,i){for(var n,o,l=t.split(p),a=[],s=[],d=0,h=0,c=l.length;h<c;++h)n=a.concat(l[h]),r<(o=e.measureText(n.join(" ")).width)&&0<a.length?(s.push(a.join(" ")),a=[l[h]]):(a=n,d=X.max(d,o));return a.length&&(s.push(a.join(" ")),d=X.max(d,o)),{lines:s,width:d,height:(s.length-1)*i}},createText:function(t,e,r,i,n){var o=this.drawLayer.getContext("2d");return o.resetTransform(),o.font=String(e)+"px sans-serif",o.fillStyle=r,(n=this.fitText(String(t),o,null==i?1/0:i,null==n?1.2*e:n)).el=o,n},drawText:function(e,t,r,i,n){var o,l,a=0;return r=null!=r?r:this.opts.text.size,i=String(i||this.opts.text.color).toLowerCase(),l=1.2*r,(o="String"===d(t)?this.createText(t,r,i,n,l):t).el.resetTransform(),o.el.font=String(r)+"px sans-serif",o.el.fillStyle=i,o.lines.forEach(function(t){o.el.fillText(t,e.x,e.y+a),a+=l}),this},drawLabel:function(t,e,r,i){var n,o,l,a,s,d=this,h=0;return i=V(!0,U(d.opts),i||{}),a="auto"===e.x?1/0:e.x-i.label.padding.left-i.label.padding.right,n=1.2*i.label.text.size,(s=d.createText(String(r),i.label.text.size,i.label.text.color,a,n)).el.save(),a="auto"===e.x?s.width+i.label.padding.left+i.label.padding.right:e.x,e="auto"===e.y?s.height+i.label.padding.top+i.label.padding.bottom:e.y,o=t.x,l=t.y,"left"===o?o=0:"right"===o?o=d.width()-a:"center"===o&&(o=(d.width()-a)/2),"top"===l?l=0:"bottom"===l?l=d.height()-e-i.label.text.size/2:"center"===l&&(l=(d.height()-e-i.label.text.size/2)/2),d.drawRect({x:o+a/2,y:l+e/2},{x:a,y:e},0,i.label.border.size,i.label.border.color,i.label.border.style,i.label.fill),o+=i.label.padding.left,l+=i.label.padding.top+i.label.text.size/2,s.el.restore(),s.lines.forEach(function(t){s.el.fillText(t,o,l+h),h+=n}),d}}),(i.Svg=function t(e,r){if(!(this instanceof t))return new t(e,r);this.container=e,this.opts=V(!0,this.defaultOpts(),r||{})})[e]=V(Object.create(i[e]),{constructor:i.Svg,NS:"http://www.w3.org/2000/svg",init:function(){var t=this;return t.drawLayer||(t.nextColor=[0,0,0],t.hitDict={},t.hitTarget=null,t.drawLayer=document.createElementNS(t.NS,"svg"),t.drawLayer.setAttribute("class","--plot-svg"),t.drawLayer.style.position="absolute",t.drawLayer.style.left="0px",t.drawLayer.style.top="0px",t.drawLayer.style.width="100%",t.drawLayer.style.height="100%",t.drawLayer.style.display="block",t.drawLayer.style.overflow="hidden",t.drawLayer.style.margin="0px",t.drawLayer.style.padding="0px",t.drawLayer.style.border="none",t.drawLayer.style.backgroundColor=t.opts.background.color,t.container.appendChild(t.drawLayer),t.drawLayer.setAttribute("viewBox","0 0 "+String(t.width())+" "+String(t.height())),t.handler=i.handler.bind(t),t.drawLayer.addEventListener("touchstart",t.handler,!1),t.drawLayer.addEventListener("mouseenter",t.handler,!1),t.drawLayer.addEventListener("click",t.handler,!1)),t},objAt:function(t,e){t=t.target?t.target.hitId:null;return t&&s.call(this.hitDict,t)?this.hitDict[t]:null},resize:function(){var t=this;return t.drawLayer&&t.drawLayer.setAttribute("viewBox","0 0 "+String(t.width())+" "+String(t.height())),t},clear:function(){var t=this;return t.drawLayer.innerHTML="",t.nextColor=[0,0,0],t.hitDict={},t.hitTarget=null,t},background:function(t){return this.opts.background.color=t,this.drawLayer.style.backgroundColor=this.opts.background.color,this},drawPoint:function(t,e,r,i){var n=this,o=document.createElementNS(n.NS,"circle");return e=null!=e?e:n.opts.point.size,r=String(r||n.opts.point.color).toLowerCase(),o.setAttribute("class","--plot-point"),o.setAttribute("cx",String(t.x)),o.setAttribute("cy",String(t.y)),o.setAttribute("r",String(e)),o.setAttribute("stroke-width","1px"),o.setAttribute("stroke",r),o.setAttribute("fill",r),o.hitId=L(n.nextColor=S(n.nextColor)),n.hitDict[o.hitId]={type:"point",pos:t,extra:i||null},n.drawLayer.appendChild(o),n},drawLine:function(t,e,r,i,n,o){var l=this,a=document.createElementNS(l.NS,"line");return r=null!=r?r:l.opts.line.size,i=String(i||l.opts.line.color).toLowerCase(),"dashed"!==(n=String(n||l.opts.line.style).toLowerCase())&&"dotted"!==n&&(n="solid"),a.setAttribute("class","--plot-line"),a.setAttribute("x1",String(t.x)),a.setAttribute("y1",String(t.y)),a.setAttribute("x2",String(e.x)),a.setAttribute("y2",String(e.y)),a.setAttribute("stroke-width",String(r)+"px"),a.setAttribute("stroke",i),"dashed"===n?a.setAttribute("stroke-dasharray","4 4"):"dotted"===n&&a.setAttribute("stroke-dasharray","2 4"),a.hitId=L(l.nextColor=S(l.nextColor)),l.hitDict[a.hitId]={type:"line",pos:[t,e],extra:o||null},l.drawLayer.appendChild(a),l},drawRect:function(t,e,r,i,n,o,l,a){var s=this,d=document.createElementNS(s.NS,"rect");return i=null!=i?i:s.opts.shape.border.size,n=String(n||s.opts.shape.border.color).toLowerCase(),"dashed"!==(o=String(o||s.opts.shape.border.style).toLowerCase())&&"dotted"!==o&&(o="solid"),l=String(null!=l?l:s.opts.shape.fill).toLowerCase(),d.setAttribute("class","--plot-rectangle"),d.setAttribute("x",String(t.x-e.x/2)),d.setAttribute("y",String(t.y-e.y/2)),d.setAttribute("width",String(e.x)),d.setAttribute("height",String(e.y)),d.setAttribute("transform","rotate("+String(r||0)+" "+String(t.x)+" "+String(t.y)+")"),0<i&&(d.setAttribute("stroke-width",String(i)+"px"),d.setAttribute("stroke",n),"dashed"===o?d.setAttribute("stroke-dasharray","4 4"):"dotted"===o&&d.setAttribute("stroke-dasharray","2 4")),d.setAttribute("fill",l||"none"),d.hitId=L(s.nextColor=S(s.nextColor)),s.hitDict[d.hitId]={type:"rect",center:t,side:e,rotation:r,extra:a||null},s.drawLayer.appendChild(d),s},drawEllipse:function(t,e,r,i,n,o,l,a){var s=this,d=document.createElementNS(s.NS,"ellipse");return i=null!=i?i:s.opts.shape.border.size,n=String(n||s.opts.shape.border.color).toLowerCase(),"dashed"!==(o=String(o||s.opts.shape.border.style).toLowerCase())&&"dotted"!==o&&(o="solid"),l=String(null!=l?l:s.opts.shape.fill).toLowerCase(),d.setAttribute("class","--plot-ellipse"),d.setAttribute("cx",String(t.x)),d.setAttribute("cy",String(t.y)),d.setAttribute("rx",String(e.x)),d.setAttribute("ry",String(e.y)),d.setAttribute("transform","rotate("+String(r||0)+" "+String(t.x)+" "+String(t.y)+")"),0<i&&(d.setAttribute("stroke-width",String(i)+"px"),d.setAttribute("stroke",n),"dashed"===o?d.setAttribute("stroke-dasharray","4 4"):"dotted"===o&&d.setAttribute("stroke-dasharray","2 4")),d.setAttribute("fill",l||"none"),d.hitId=L(s.nextColor=S(s.nextColor)),s.hitDict[d.hitId]={type:"ellipse",center:t,radius:e,rotation:r,extra:a||null},s.drawLayer.appendChild(d),s},drawSector:function(t,e,r,i,n,o,l,a,s){var d,h,c,y,p,x,u,g=this;return n=null!=n?n:g.opts.shape.border.size,o=String(o||g.opts.shape.border.color).toLowerCase(),"dashed"!==(l=String(l||g.opts.shape.border.style).toLowerCase())&&"dotted"!==l&&(l="solid"),a=String(null!=a?a:g.opts.shape.fill).toLowerCase(),p=m(r),d=m(i)-p,h=t.x,c=t.y,u=L(g.nextColor=S(g.nextColor)),v<=d+H?((x=document.createElementNS(g.NS,"ellipse")).setAttribute("cx",String(h)),x.setAttribute("cy",String(c)),x.setAttribute("rx",String(e)),x.setAttribute("ry",String(e))):(y={x:h+e,y:c},p={x:h+e*X.cos(d),y:c+e*X.sin(d)},(x=document.createElementNS(g.NS,"path")).setAttribute("d","M "+String(h)+" "+String(c)+" L "+String(y.x)+" "+String(y.y)+" A "+String(e)+" "+String(e)+" 0 "+String(f<=d?1:0)+" 1 "+String(p.x)+" "+String(p.y)+" L "+String(h)+" "+String(c)+" Z"),x.setAttribute("transform","rotate("+String(r)+" "+String(h)+" "+String(c)+")")),x.setAttribute("class","--plot-sector"),x.setAttribute("stroke-width",String(n)+"px"),x.setAttribute("stroke",o),x.setAttribute("fill",a),"dashed"===l?x.setAttribute("stroke-dasharray","4 4"):"dotted"===l&&x.setAttribute("stroke-dasharray","2 4"),x.hitId=u,g.hitDict[x.hitId]={type:"sector",center:t,radius:e,a0:r,a1:i,extra:s||null},g.drawLayer.appendChild(x),g},fitText:function(t,e,r,i){var n,o,l,a,s,d=t.split(p),h=[],c=[],y=0;for(e.style.visibility="hidden",this.drawLayer.appendChild(e),n=0,o=d.length;n<o;++n)l=h.concat(d[n]),e.textContent=l.join(" "),a=e.getBBox(),r<(s=X.round(a.width))&&0<h.length?(c.push(h.join(" ")),h=[d[n]]):(h=l,y=X.max(y,s));return h.length&&(c.push(h.join(" ")),y=X.max(y,s)),this.drawLayer.removeChild(e),{lines:c,width:y,height:(c.length-1)*i}},createText:function(t,e,r,i,n){var o=document.createElementNS(this.NS,"text");return o.setAttribute("class","--plot-text"),o.setAttribute("fill",r),o.style.fontSize=String(e)+"px",o.style.fontFamily="sans-serif",(n=this.fitText(String(t),o.cloneNode(!1),null==i?1/0:i,null==n?1.2*e:n)).el=o,n},drawText:function(r,t,e,i,n){var o,l,a=this,s=0;return e=null!=e?e:a.opts.text.size,i=String(i||a.opts.text.color).toLowerCase(),l=1.2*e,(o="String"===d(t)?a.createText(t,e,i,n,l):t).el.setAttribute("fill",i),o.el.style.fontSize=String(e)+"px",o.el.style.fontFamily="sans-serif",o.el.setAttribute("x",r.x),o.el.setAttribute("y",r.y),o.lines.forEach(function(t){var e=document.createElementNS(a.NS,"tspan");e.setAttribute("x",r.x),e.setAttribute("dy",s),e.textContent=t,o.el.appendChild(e),0===s&&(s=l)}),a.drawLayer.appendChild(o.el),a},drawLabel:function(t,e,r,i){var n,o,l,a,s=this,d=0;return i=V(!0,U(s.opts),i||{}),l="auto"===e.x?1/0:e.x-i.label.padding.left-i.label.padding.right,n=1.2*i.label.text.size,a=s.createText(String(r),i.label.text.size,i.label.text.color,l,n),l="auto"===e.x?a.width+i.label.padding.left+i.label.padding.right:e.x,e="auto"===e.y?a.height+i.label.padding.top+i.label.padding.bottom:e.y,o=t.x,t=t.y,"left"===o?o=0:"right"===o?o=s.width()-l:"center"===o&&(o=(s.width()-l)/2),"top"===t?t=0:"bottom"===t?t=s.height()-e-i.label.text.size/2:"center"===t&&(t=(s.height()-e-i.label.text.size/2)/2),s.drawRect({x:o+l/2,y:t+e/2},{x:l,y:e},0,i.label.border.size,i.label.border.color,i.label.border.style,i.label.fill),o+=i.label.padding.left,t+=i.label.padding.top+i.label.text.size/2,a.el.setAttribute("x",o),a.el.setAttribute("y",t),a.lines.forEach(function(t){var e=document.createElementNS(s.NS,"tspan");e.setAttribute("x",o),e.setAttribute("dy",d),e.textContent=t,a.el.appendChild(e),0===d&&(d=n)}),s.drawLayer.appendChild(a.el),s}}),n[e]={constructor:n,renderer:null,opts:null,dispose:function(){var t=this;return t.tooltip&&document.body.removeChild(t.tooltip),t.renderer=null,t.tooltip=null,t.opts=null,t},defaultOpts:function(){return{tolerance:1e-4,depth:20,npoints:60,background:{color:"#ffffff"},padding:{top:0,right:0,bottom:0,left:0},text:{size:14,color:"#000000"},point:{size:4,color:"#000000"},line:{size:1,color:"#000000",style:"solid"},shape:{border:{size:1,color:"#000000",style:"solid"},fill:"none"},label:{text:{size:14,color:"#000000"},border:{size:1,color:"#000000",style:"solid"},fill:"none",padding:{top:10,right:10,bottom:10,left:10}},axes:{x:{size:2,color:"#000000",style:"solid",ticks:{size:1,color:"rgba(0,0,0,0.5)",style:"dashed",text:{size:16,color:"#000000"},step:"auto",scale:"linear"}},y:{size:2,color:"#000000",style:"solid",ticks:{size:1,color:"rgba(0,0,0,0.5)",style:"dashed",text:{size:16,color:"#000000"},step:"auto",scale:"linear"}}},legend:{position:"bottom",text:{size:10,color:"#000000"}},colors:null,labels:null}},boundingBox:function(t){var e,r,i,n,o,l=t.length;if(M(t[0])){for(r=1/0,n=-1/0,e=0;e<l;++e)q(t[e])&&(t[e]<r&&(r=t[e]),t[e]>n&&(n=t[e]));return{min:r,max:n}}for(i=r=1/0,o=n=-1/0,e=0;e<l;++e)Y.isFinite(t[e])&&(t[e].x<r&&(r=t[e].x),t[e].y<i&&(i=t[e].y),t[e].x>n&&(n=t[e].x),t[e].y>o&&(o=t[e].y));return{min:{x:r,y:i},max:{x:n,y:o}}},sample:function(t,e,r,i){var n,o,l,a;for(i=V(U(this.opts),i||{}),null==e&&(e=0),null==r&&(r=e+1),t=c(t.x)&&c(t.y)?t:{x:O,y:t},a=X.ceil(2*i.npoints/3),l=r-e,n=[new Y(t.x(e),t.y(e))],o=0;o<a;++o)y(n,t,e+(0===o?0:o/a)*l,e+(a===o+1?1:(o+1)/a)*l,i.tolerance,i.depth);return n},width:function(){return this.renderer.init().width()},height:function(){return this.renderer.init().height()},resize:function(){return this.renderer.init().resize(),this},clear:function(){return this.renderer.init().background(this.opts.background.color).clear(),this},text:function(t,e,r){var i=this.renderer;return r=V(!0,U(this.opts),r||{}),i.init(),i.drawText(t,String(e),r.text.size,r.text.color),this},point:function(t,e){var r,i,n=this.renderer;for(e=V(!0,U(this.opts),e||{}),n.init(),R(t)||(t=[t]),r=0,i=t.length;r<i;++r)Y.isFinite(t[r])&&n.drawPoint(t[r],e.point.size,e.point.color);return this},line:function(t,e){var r,i,n=this.renderer;for(e=V(!0,U(this.opts),e||{}),n.init(),R(t)||(t=[t]),r=0,i=t.length;r+1<i;++r)Y.isFinite(t[r])&&Y.isFinite(t[r+1])&&n.drawLine(t[r],t[r+1],e.line.size,e.line.color,e.line.style);return this},rectangle:function(e,r,i,n){var o=this.renderer;return o.init(),arguments.length<=2&&R(e)?(n=V(!0,U(this.opts),r||{}),e.forEach(function(t){n=V(!0,n,t[3]||{}),i=t[2],M(r=t[1])&&(r={x:r,y:r}),e=t[0],o.drawRect(e,r,i||0,n.shape.border.size,n.shape.border.color,n.shape.border.style,n.shape.fill)})):(n=V(!0,U(this.opts),n||{}),o.drawRect(e,r,i||0,n.shape.border.size,n.shape.border.color,n.shape.border.style,n.shape.fill)),this},ellipse:function(e,r,i,n){var o=this.renderer;return o.init(),arguments.length<=2&&R(e)?(n=V(!0,U(this.opts),r||{}),e.forEach(function(t){n=V(!0,n,t[3]||{}),i=t[2],M(r=t[1])&&(r={x:r,y:r}),e=t[0],o.drawEllipse(e,r,i||0,n.shape.border.size,n.shape.border.color,n.shape.border.style,n.shape.fill)})):(n=V(!0,U(this.opts),n||{}),M(r)&&(r={x:r,y:r}),o.drawEllipse(e,r,i||0,n.shape.border.size,n.shape.border.color,n.shape.border.style,n.shape.fill)),this},sector:function(e,r,i,n,o){var l=this.renderer;return l.init(),arguments.length<=2&&R(e)?(o=V(!0,U(this.opts),r||{}),e.forEach(function(t){o=V(!0,o,t[4]||{}),n=t[3],i=t[2],r=t[1],e=t[0],l.drawSector(e,+r,+i,+n,o.shape.border.size,o.shape.border.color,o.shape.border.style,o.shape.fill)})):(o=V(!0,U(this.opts),o||{}),l.drawSector(e,+r,+i,+n,o.shape.border.size,o.shape.border.color,o.shape.border.style,o.shape.fill)),this},label:function(t,e,r,i){var n=this.renderer;return n.init(),n.drawLabel(t,e,String(r),V(!0,U(this.opts),i||{})),this},graph:function(t,e,r,i){var n,o,l,a,s,d,h,c,y,p,x,u,g,f,b,w,v,m,S,L,C,k,z,T,A,E=this,D=[],N=[],j=[],P=[],I=E.renderer;if((i=V(!0,U(E.opts),i||{})).axes&&i.axes.x&&i.axes.x.ticks&&i.axes.x.ticks.scale,x=O,i.axes&&i.axes.y&&i.axes.y.ticks&&i.axes.y.ticks.scale,u=O,d=X.max(0,i.padding&&i.padding.left||0),h=X.max(0,i.padding&&i.padding.right||0),c=X.max(0,i.padding&&i.padding.top||0),y=X.max(0,i.padding&&i.padding.bottom||0),o=(n=R(t)?t:E.sample(t,e,r,i)).map(function(t){return t.apply(x,u)}),I.init(),a=I.width(),s=I.height(),t=(p=E.boundingBox(o)).max.x-p.min.x+H,e=p.max.y-p.min.y+H,r=X.min((a-d-h)/t,(s-c-y)/e),p=(l=(new B).translate(-p.min.x,-p.min.y).scale(r).translate(d+(a-d-h-r*t)/2,c+(s-c-y-r*e)/2)).transform(new Y(0,0)).apply(X.round),i.axes){if(i.axes.y&&i.axes.y.ticks&&(w="auto"===i.axes.y.ticks.step?e/4:i.axes.y.ticks.step,0<(S=X.round(r*w))))for(k=0,s<(v=p.y)&&(k-=z=X.ceil((v-s)/S),v-=z*S),v<0&&(k+=z=X.ceil(-v/S),v+=z*S),L=v===p.y?1:0,m=v+(C=-1)*S,g=u(v+=L*S),f=u(m);g<=s-y||c<=f;)c<=g&&g<=s-y&&(I.drawLine({x:d,y:s-g},{x:a-h,y:s-g},i.axes.y.ticks.size,i.axes.y.ticks.color,i.axes.y.ticks.style),N.push({y:s-g,v:(k+L)*w})),c<=f&&f<=s-y&&(I.drawLine({x:d,y:s-f},{x:a-h,y:s-f},i.axes.y.ticks.size,i.axes.y.ticks.color,i.axes.y.ticks.style),P.push({y:s-f,v:(k+C)*w})),m-=S,++L,--C,g=u(v+=S),f=u(m);if(i.axes.x&&i.axes.x.ticks&&(b="auto"===i.axes.x.ticks.step?t/4:i.axes.x.ticks.step,0<(S=X.round(r*b))))for(k=0,a<(v=p.x)&&(k-=z=X.ceil((v-a)/S),v-=z*S),v<0&&(k+=z=X.ceil(-v/S),v+=z*S),L=v===p.x?1:0,m=v+(C=-1)*S,g=x(v+=L*S),f=x(m);g<=a-h||d<=f;)d<=g&&g<=a-h&&(I.drawLine({x:g,y:s-y},{x:g,y:c},i.axes.x.ticks.size,i.axes.x.ticks.color,i.axes.x.ticks.style),D.push({x:g,v:(k+L)*b})),d<=f&&f<=s-h&&(I.drawLine({x:f,y:s-y},{x:f,y:c},i.axes.x.ticks.size,i.axes.x.ticks.color,i.axes.x.ticks.style),j.push({x:f,v:(k+C)*b})),m-=S,++L,--C,g=x(v+=S),f=x(m);i.axes.x&&p.y>=c&&p.y<=s-y&&I.drawLine({x:d,y:s-p.y},{x:a-h,y:s-p.y},i.axes.x.size,i.axes.x.color,i.axes.x.style),i.axes.y&&p.x>=d&&p.x<=a-h&&I.drawLine({x:p.x,y:c},{x:p.x,y:s-y},i.axes.y.size,i.axes.y.color,i.axes.y.style)}for(T=function(t,e,r,i){var n=E.tooltip;if("enter"===t)n.classList.remove("--plot-hide-tooltip"),n.classList.add("--plot-show-tooltip");else if("leave"===t)return n.classList.remove("--plot-show-tooltip"),void n.classList.add("--plot-hide-tooltip");t=(r.localX-e.pos[0].x)/(e.pos[1].x-e.pos[0].x),n.innerHTML="x: "+String(F(e.extra.p1.x,e.extra.p2.x,t))+"<br />y: "+String(F(e.extra.p1.y,e.extra.p2.y,t)),n.style.left=String(r.pageX)+"px",n.style.top=String(r.pageY)+"px"},L=0,k=(o=(o=o.map(function(t){return l.transform(t)})).map((A=s,function(t){return M(t)?A-t:(t.y=A-t.y,t)}))).length;L+1<k;++L)Y.isFinite(o[L])&&Y.isFinite(o[L+1])&&I.drawLine(o[L],o[L+1],i.line.size,i.line.color,i.line.style,{p1:n[L],p2:n[L+1],listener:{enter:T,leave:T,move:T}});if(i.axes){if(i.axes.x&&i.axes.x.ticks&&i.axes.x.ticks.text&&0<i.axes.x.ticks.text.size&&(D.length||j.length)){for(v=p.y>=c&&p.y<=s-y?s-p.y-5:s-y-5,S=X.ceil(D.length/3),L=0;L<D.length;L+=S)0!==D[L].v&&I.drawText({x:D[L].x+2,y:v},String(D[L].v),i.axes.x.ticks.text.size,i.axes.x.ticks.text.color);for(S=X.ceil(j.length/3),L=0;L<j.length;L+=S)0!==j[L].v&&I.drawText({x:j[L].x+2,y:v},String(j[L].v),i.axes.x.ticks.text.size,i.axes.x.ticks.text.color)}if(i.axes.y&&i.axes.y.ticks&&i.axes.y.ticks.text&&0<i.axes.y.ticks.text.size&&(N.length||P.length)){for(v=p.x>=d&&p.x<=a-h?p.x+5:d+5,S=X.ceil(N.length/3),L=0;L<N.length;L+=S)0!==N[L].v&&I.drawText({x:v,y:N[L].y-2},String(N[L].v),i.axes.y.ticks.text.size,i.axes.y.ticks.text.color);for(S=X.ceil(P.length/3),L=0;L<P.length;L+=S)0!==P[L].v&&I.drawText({x:v,y:P[L].y-2},String(P[L].v),i.axes.y.ticks.text.size,i.axes.y.ticks.text.color)}}return E},chart:function(t,e,r){var i,n,o,l,a,s,d,h,c,y,p,x,u,g,f,b,w,v,m,S,L,C,k,z,T,A,E,D,N,j=this,P=[],I=[],R=.2,O=null,F=0,W=j.renderer;if("bar"===(t=String(t||"vbar").toLowerCase())&&(t="vbar"),(r=V(!0,U(j.opts),{padding:{top:10,right:10,bottom:10,left:10}},r||{})).colors=r.colors||Z(e.length),r.labels=r.labels||function(t){var e,r=new Array(t);for(e=0;e<t;++e)r[e]="Entry: "+String(e+1);return r}(e.length),k=X.max(0,r.padding&&r.padding.left||0),z=X.max(0,r.padding&&r.padding.right||0),T=X.max(0,r.padding&&r.padding.top||0),A=X.max(0,r.padding&&r.padding.bottom||0),m=e.length,W.init(),n=W.width(),o=W.height(),r.legend&&r.legend.position)if(r.legend.position=String(r.legend.position).toLowerCase(),L=1.2*(w=r.legend.text.size),R=1.5*w,N=r.labels.map(function(t){return W.createText(String(t),w,r.legend.text.color)}),"top"===r.legend.position){for(S=1,g=0;S<=m;++S){if(n-k-z<(g+=N[S-1].width+R+w)){--S;break}g+=20}for(m<S&&(S=m),g=v=0;v<S;++v)W.drawRect({x:k+g+w/2,y:T+w/2},{x:w,y:w},0,0,"transparent","solid",r.colors[v]),W.drawText({x:k+g+R,y:T+w},N[v],w,r.legend.text.color),g+=N[v].width+R+w+20;T+=N[0].height+L+20}else if("bottom"===r.legend.position){for(S=1,g=0;S<=m;++S){if(n-k-z<(g+=N[S-1].width+R+w)){--S;break}g+=20}for(m<S&&(S=m),g=v=0;v<S;++v)W.drawRect({x:k+g+w/2,y:o-A-w/2},{x:w,y:w},0,0,"transparent","solid",r.colors[v]),W.drawText({x:k+g+R,y:o-A},N[v],w,r.legend.text.color),g+=N[v].width+R+w+20;A+=N[0].height+L+20}else if("left"===r.legend.position){for(S=X.min(m,X.floor((o-T-A)/L)),g=v=y=0;v<S;++v)W.drawRect({x:k+w/2,y:T+g+w/2},{x:w,y:w},0,0,"transparent","solid",r.colors[v]),W.drawText({x:k+R,y:T+g+w},N[v],w,r.legend.text.color),g+=L,y=X.max(y,N[v].width);k+=y+R+w+20}else if("right"===r.legend.position){for(S=X.min(m,X.floor((o-T-A)/L)),g=v=y=0;v<S;++v)y=X.max(y,N[v].width);for(g=v=0;v<S;++v)W.drawRect({x:n-z-y-w-R+w/2,y:T+g+w/2},{x:w,y:w},0,0,"transparent","solid",r.colors[v]),W.drawText({x:n-z-y-w,y:T+g+w},N[v],w,r.legend.text.color),g+=L;z+=y+R+w+20}if("pie"===t||"doughnut"===t)for(w=F=0;w<e.length;++w)F+=q(e[w])?X.abs(e[w]):0;else{if(R=.2,O="hbar"===t?(r.axes&&r.axes.x?r.axes.x.ticks:null)||null:(r.axes&&r.axes.y?r.axes.y.ticks:null)||null,i=e.map(function(t,e){return M(t)?new Y(e,t):t}),C=j.boundingBox(i),"hbar"===t?(O&&O.text&&0<O.text.size&&(E=o-A-2,A+=2*O.text.size),f=X.max(1,(o-A-T)/(m+R*(m-1))),c=C.min.y<0?-C.min.y:0,d=1,h=k+(s=(n-k-z)/(p=C.max.y+c))*c,b=f/2,l=(new B).scale(1,s)):"vbar"===t?(O&&O.text&&0<O.text.size&&(E=k+2,k+=2*O.text.size),f=X.max(1,(n-k-z)/(m+R*(m-1))),c=C.min.y<0?-C.min.y:0,d=1,h=o-(s=(o-T-A)/(p=C.max.y+c))*c-A,b=f/2,l=(new B).scale(1,s)):(O&&O.text&&0<O.text.size&&(E=k+2,k+=2*O.text.size),p=a=C.max.y-C.min.y+H,s=(o-T-A)/a,d=(n-k-z)/(c=C.max.x-C.min.x+H),h=o-(l=(new B).translate(-C.min.x,-C.min.y).scale(d,s).translate(k+(n-k-z-d*c)/2,(o-T-A-s*a)/2)).transform(new Y(0,0)).apply(X.round).y-A),r.axes){if(O&&(L="auto"===O.step?p/4:O.step,0<(g=X.round(s*L))))if("hbar"===t)for(m=0,n<(x=h)&&(m-=S=X.ceil((x-n)/g),x-=S*g),x<0&&(m+=S=X.ceil(-x/g),x+=S*g),u=x+(v=-1)*g,x+=(w=x===h?1:0)*g;x<=n-z||k<=u;)k<=x&&x<=n-z&&(W.drawLine({y:T,x:x},{y:o-A,x:x},O.size,O.color,O.style),P.push({p:x,v:(m+w)*L})),k<=u&&u<=n-z&&(W.drawLine({y:T,x:u},{y:o-A,x:u},O.size,O.color,O.style),I.push({p:u,v:(m+v)*L})),x+=g,u-=g,w++,v--;else for(m=0,o<(x=h)&&(m-=S=X.ceil((x-o)/g),x+=S*g),x<0&&(m+=S=X.ceil(-x/g),x-=S*g),u=x-(v=-1)*g,x-=(w=x===h?1:0)*g;T<=x||u<=o-A;)T<=x&&x<=o-A&&(W.drawLine({x:k,y:x},{x:n-z,y:x},O.size,O.color,O.style),P.push({p:x,v:(m+w)*L})),T<=u&&u<=o-A&&(W.drawLine({x:k,y:u},{x:n-z,y:u},O.size,O.color,O.style),I.push({p:u,v:(m+v)*L})),x-=g,u+=g,++w,--v;"hbar"===t?r.axes.y&&W.drawLine({y:T,x:h},{y:o-A,x:h},r.axes.y.size,r.axes.y.color,r.axes.y.style):r.axes.x&&W.drawLine({y:h,x:k},{y:h,x:n-z},r.axes.x.size,r.axes.x.color,r.axes.x.style)}i=i.map(function(t){return l.transform(t)})}if(D=function(t,e,r,i){var n=j.tooltip;if("enter"===t)n.classList.remove("--plot-hide-tooltip"),n.classList.add("--plot-show-tooltip"),n.innerHTML=e.extra.label+"<br />"+e.extra.value;else if("leave"===t)return n.classList.remove("--plot-show-tooltip"),void n.classList.add("--plot-hide-tooltip");n.style.left=String(r.pageX)+"px",n.style.top=String(r.pageY)+"px"},"pie"===t||"doughnut"===t){for(f=.4*X.min(n-k-z,o-T-A),w=0,m=e.length,g=0;w<m;++w)q(e[w])&&(L=X.abs(e[w]),W.drawSector({x:n/2,y:o/2},f,360*g/F-90,360*(g+L)/F-90,0,"transparent","solid",r.colors[w],{label:r.labels[w],value:String(L),listener:{enter:D,leave:D,move:D}}),g+=L);"doughnut"===t&&W.drawEllipse({x:n/2,y:o/2},{x:.5*f,y:.5*f},0,0,"transparent","solid",r.background.color)}else if("line"===t){for(w=0,m=i.length;w+1<m;++w)Y.isFinite(i[w])&&Y.isFinite(i[w+1])&&W.drawLine({x:i[w].x,y:o-i[w].y-A},{x:i[w+1].x,y:o-i[w+1].y-A},r.line.size,r.line.color,r.line.style);for(w=0,m=i.length;w<m;++w)Y.isFinite(i[w])&&W.drawPoint({x:i[w].x,y:o-i[w].y-A},r.point.size,r.colors[w],{label:r.labels[w],value:M(e[w])?String(e[w]):"("+String(e[w].x)+","+String(e[w].y)+")",listener:{enter:D,leave:D,move:D}})}else for(w=0,m=i.length,g=0;w<m;++w,g+=f)Y.isFinite(i[w])&&("hbar"===t?W.drawRect({y:T+b+g+(0<w?R*g:0),x:h+i[w].y/2},{y:f,x:X.abs(i[w].y)},0,0,"transparent","solid",r.colors[w],{label:r.labels[w],value:String(e[w]),listener:{enter:D,leave:D,move:D}}):W.drawRect({x:k+b+g+(0<w?R*g:0),y:h-i[w].y/2},{x:f,y:X.abs(i[w].y)},0,0,"transparent","solid",r.colors[w],{label:r.labels[w],value:String(e[w]),listener:{enter:D,leave:D,move:D}}));if(r.axes&&O&&O.text&&0<O.text.size&&(P.length||I.length)){for(x=E,g=X.ceil(P.length/3),w=0;w<P.length;w+=g)0!==P[w].v&&W.drawText("hbar"===t?{x:P[w].p+2,y:x}:{y:P[w].p+O.text.size/2,x:x},String(P[w].v),O.text.size,O.text.color);for(g=X.ceil(I.length/3),w=0;w<I.length;w+=g)0!==I[w].v&&W.drawText("hbar"===t?{x:I[w].p+2,y:x}:{y:I[w].p+O.text.size/2,x:x},String(I[w].v),O.text.size,O.text.color)}return j}},n.VERSION="1.1.0",n.Util={clone:U,extend:V,debounce:function(r,i){var n=null;return function(){var t=this,e=arguments;clearTimeout(n),n=setTimeout(function(){r.apply(t,e)},i)}},subdivide:y,hex2rgb:function(t){return[(t=parseInt("#"===t.charAt(0)?t.slice(1):t,16))>>16&255,t>>8&255,255&t]},rgb2hex:L,hsb2rgb:a,rgb2hsb:function(t){var e=0,r=0,i=0,n=t[0],o=t[1],l=t[2],a=X.min(n,o,l),t=X.max(n,o,l),a=t-a;i=t;e=0!=(r=0!==t?255*a/t:0)?n===t?(o-l)/a:o===t?2+(l-n)/a:4+(n-o)/a:-1;(e*=60)<0&&(e+=360);return r=100*r/255,i=100*i/255,[X.round(e),X.round(r),X.round(i)]},palette:Z},n.Point=Y,n.Matrix=B,n.Renderer=i,X.hypot||(X.hypot=function(t,e){for(var r,i=0,n=0,o=arguments.length,l=0;l<o;++l)i<(r=X.abs(Number(arguments[l])))&&(n*=i/r*(i/r),i=r),n+=0===r&&0===i?0:r/i*(r/i);return i===1/0?1/0:i*X.sqrt(n)}),n});